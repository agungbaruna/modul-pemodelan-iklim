<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Modul Praktikum Pemodelan Iklim - 2&nbsp; Dynamical Downscaling: Model Weather Research Forecasting (WRF)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./praktikum-2.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./praktikum-1.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">*Dynamical Downscaling*: Model Weather Research Forecasting (WRF)</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Modul Praktikum Pemodelan Iklim</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">{.unnumbered}</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./praktikum-1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title"><em>Dynamical Downscaling</em>: Model Weather Research Forecasting (WRF)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./praktikum-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Model Pendugaan Radiasi Matahari</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./praktikum-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Koreksi Bias Statistik</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#pendahuluan" id="toc-pendahuluan" class="nav-link active" data-scroll-target="#pendahuluan"><span class="header-section-number">2.1</span> Pendahuluan</a></li>
  <li><a href="#pemrograman-bash" id="toc-pemrograman-bash" class="nav-link" data-scroll-target="#pemrograman-bash"><span class="header-section-number">2.2</span> Pemrograman Bash</a>
  <ul class="collapse">
  <li><a href="#pemrograman-bash-pada-sistem-operasi-windows" id="toc-pemrograman-bash-pada-sistem-operasi-windows" class="nav-link" data-scroll-target="#pemrograman-bash-pada-sistem-operasi-windows"><span class="header-section-number">2.2.1</span> Pemrograman Bash pada Sistem Operasi Windows</a></li>
  <li><a href="#instalasi-docker-pada-macos-chipset-m1-dan-m2" id="toc-instalasi-docker-pada-macos-chipset-m1-dan-m2" class="nav-link" data-scroll-target="#instalasi-docker-pada-macos-chipset-m1-dan-m2"><span class="header-section-number">2.2.2</span> Instalasi Docker pada MacOS (chipset M1 dan M2)</a></li>
  <li><a href="#dasar-dasar-pemrograman-bash" id="toc-dasar-dasar-pemrograman-bash" class="nav-link" data-scroll-target="#dasar-dasar-pemrograman-bash"><span class="header-section-number">2.2.3</span> Dasar-dasar Pemrograman Bash</a></li>
  </ul></li>
  <li><a href="#instalasi-software-pengolahan-data-dan-model-wrf" id="toc-instalasi-software-pengolahan-data-dan-model-wrf" class="nav-link" data-scroll-target="#instalasi-software-pengolahan-data-dan-model-wrf"><span class="header-section-number">2.3</span> Instalasi Software Pengolahan Data dan Model WRF</a>
  <ul class="collapse">
  <li><a href="#instalasi-software-pengolahan-data" id="toc-instalasi-software-pengolahan-data" class="nav-link" data-scroll-target="#instalasi-software-pengolahan-data"><span class="header-section-number">2.3.1</span> Instalasi Software Pengolahan Data</a></li>
  <li><a href="#sebelum-mulai" id="toc-sebelum-mulai" class="nav-link" data-scroll-target="#sebelum-mulai"><span class="header-section-number">2.3.2</span> Sebelum Mulai</a></li>
  <li><a href="#data-dan-software-pendukung" id="toc-data-dan-software-pendukung" class="nav-link" data-scroll-target="#data-dan-software-pendukung"><span class="header-section-number">2.3.3</span> Data dan Software Pendukung</a></li>
  <li><a href="#instalasi-software-compiler" id="toc-instalasi-software-compiler" class="nav-link" data-scroll-target="#instalasi-software-compiler"><span class="header-section-number">2.3.4</span> Instalasi Software Compiler</a></li>
  <li><a href="#instalasi-package" id="toc-instalasi-package" class="nav-link" data-scroll-target="#instalasi-package"><span class="header-section-number">2.3.5</span> Instalasi Package</a></li>
  <li><a href="#instalasi-wrf" id="toc-instalasi-wrf" class="nav-link" data-scroll-target="#instalasi-wrf"><span class="header-section-number">2.3.6</span> Instalasi WRF</a></li>
  <li><a href="#instalasi-wrf-pre-processing-wps" id="toc-instalasi-wrf-pre-processing-wps" class="nav-link" data-scroll-target="#instalasi-wrf-pre-processing-wps"><span class="header-section-number">2.3.7</span> Instalasi WRF Pre-Processing (WPS)</a></li>
  </ul></li>
  <li><a href="#menjalankan-simulasi-wrf-arw" id="toc-menjalankan-simulasi-wrf-arw" class="nav-link" data-scroll-target="#menjalankan-simulasi-wrf-arw"><span class="header-section-number">2.4</span> Menjalankan Simulasi WRF-ARW</a>
  <ul class="collapse">
  <li><a href="#program-wps" id="toc-program-wps" class="nav-link" data-scroll-target="#program-wps"><span class="header-section-number">2.4.1</span> Program WPS</a></li>
  <li><a href="#program-wrf" id="toc-program-wrf" class="nav-link" data-scroll-target="#program-wrf"><span class="header-section-number">2.4.2</span> Program WRF</a></li>
  </ul></li>
  <li><a href="#visualisasi-luaran-wrf" id="toc-visualisasi-luaran-wrf" class="nav-link" data-scroll-target="#visualisasi-luaran-wrf"><span class="header-section-number">2.5</span> Visualisasi Luaran WRF</a>
  <ul class="collapse">
  <li><a href="#python" id="toc-python" class="nav-link" data-scroll-target="#python"><span class="header-section-number">2.5.1</span> Python</a></li>
  <li><a href="#python-tanpa-wrf-python" id="toc-python-tanpa-wrf-python" class="nav-link" data-scroll-target="#python-tanpa-wrf-python"><span class="header-section-number">2.5.2</span> Python (tanpa <code>wrf-python</code>)</a></li>
  <li><a href="#r" id="toc-r" class="nav-link" data-scroll-target="#r"><span class="header-section-number">2.5.3</span> R</a></li>
  <li><a href="#ncl" id="toc-ncl" class="nav-link" data-scroll-target="#ncl"><span class="header-section-number">2.5.4</span> NCL</a></li>
  <li><a href="#qgis" id="toc-qgis" class="nav-link" data-scroll-target="#qgis"><span class="header-section-number">2.5.5</span> QGIS</a></li>
  <li><a href="#julia-1" id="toc-julia-1" class="nav-link" data-scroll-target="#julia-1"><span class="header-section-number">2.5.6</span> Julia</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title"><em>Dynamical Downscaling</em>: Model Weather Research Forecasting (WRF)</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="pendahuluan" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="pendahuluan"><span class="header-section-number">2.1</span> Pendahuluan</h2>
<p><em>Global Climate Model</em> (GCM) adalah alat yang digunakan dalam mensimulasikan keadaan iklim pada masa lalu, masa sekarang, maupun masa depan. GCM memiliki kemampuan dalam melakukan simulasi variabilitas iklim, sifat-sifat fisis, serta kimia di bumi dengan perhitungan secara matematis yang menggambarkan proses interaksi dan timbal balik pada komponen atmosfer, lautan, dan biotik. Kelemahan dalam GCM adalah ketidakmampuan menangkap kejadian-kejadian iklim pada skala regional maupun lokal karena memiliki resolusi spasial yang kecil, yaitu sekitar &gt;100 km. Ketidakmampuan GCM dalam menjelaskan keadaan iklim secara regional maupun lokal disebabkan oleh keterbatasan sumber daya komputasi. Seiring dengan berkembangnya teknologi komputasi, beberapa instansi seperti Met Office Hadley Center, National Center for Atmospheric Research (NCAR), dan European Centre for Medium-Range Weather Forecasts (ECMWF) telah mengembangkan GCM yang mampu menjelaskan fenomena-fenomena cuaca pada skala regional dengan sumber daya komputer yang sangat tinggi. Teknologi komputasi saat ini sangat memudahkan bagi para pengembang GCM, terutama dalam kecepatan eksekusi algoritme prakiraan cuaca numerik. Contohnya, model prakiraan cuaca dari ECMWF, yaitu Integrated Forecasts System (IFS) memiliki resolusi spasial sekitar 9 km. Apakah dengan berkembangnya GCM yang sudah bisa menjelaskan fenomena regional telah menggantikan Regional Climate Model (RCM)? Tentu saja tidak. Peran RCM masih penting dalam proses <em>downscaling</em> resolusi spasial maupun temporal sampai pada skala lokal maupun mikro (mis. turbulensi).</p>
<p>Metode <em>downscaling</em> merupakan suatu cara dalam mendapatkan informasi spesifik pada suatu wilayah tertentu dengan resolusi tinggi, baik spasial maupun temporal. Metode <em>downscaling</em> di dalam ilmu iklim umum digunakan pada aplikasi dalam bidang hidrologi <span class="citation" data-cites="piani2010suhu">(<a href="#ref-piani2010suhu" role="doc-biblioref">Piani, Weedon, <em>et al.</em> 2010</a>)</span>, pertanian <span class="citation" data-cites="glotter2014">(<a href="#ref-glotter2014" role="doc-biblioref">Glotter <em>et al.</em> 2014</a>)</span>, dan iklim perkotaan <span class="citation" data-cites="smid2018">(<a href="#ref-smid2018" role="doc-biblioref">Smid and Costa 2018</a>)</span>. Misalnya dalam bidang hidrologi, teknik <em>downscaling</em> digunakan untuk pemodelan debit sungai dan banjir <span class="citation" data-cites="piani2010pr">(<a href="#ref-piani2010pr" role="doc-biblioref">Piani, Haerter, <em>et al.</em> 2010</a>)</span>. Wilby dan Wigley <span class="citation" data-cites="wilby1997">(<a href="#ref-wilby1997" role="doc-biblioref">Wilby and Wigley 1997</a>)</span> mengelompokkan teknik <em>downscaling</em> menjadi 4 kategori, yaitu</p>
<ol type="1">
<li><p>Regresi</p>
<p>Metode regresi merupakan metode <em>downscaling</em> paling awal yang telah digunakan pada kajian perubahan iklim. Hal ini dapat dibuktikan dari penelitian oleh Kim pada tahun 1984 <span class="citation" data-cites="kim1984">(<a href="#ref-kim1984" role="doc-biblioref">Kim <em>et al.</em> 1984</a>)</span>. Pendekatan ini secara umum membangun hubungan linier atau non-linier antara parameter titik lokasi dengan prediktor variabel dari resolusi kasar. Contoh dari metode ini adalah regresi linier sederhana, regresi linier berganda, Artificial Neural Network (ANN), regresi komponen utama (Principle Component Regression/PCR), dan lain sebagainya. Sudah banyak penelitian yang menerapkan metode ini untuk kajian perubahan iklim <span class="citation" data-cites="pahlavan2018 huth2000 goly2014 sachindra2014">(<a href="#ref-huth2000" role="doc-biblioref">Huth and Kyselỳ 2000</a>; <a href="#ref-goly2014" role="doc-biblioref">Goly <em>et al.</em> 2014</a>; <a href="#ref-sachindra2014" role="doc-biblioref">Sachindra <em>et al.</em> 2014</a>; <a href="#ref-pahlavan2018" role="doc-biblioref">Pahlavan <em>et al.</em> 2018</a>)</span>.</p></li>
<li><p>Pola cuaca</p>
<p>Metode ini dibangun dari hubungan statistik dari variabel cuaca di stasiun observasi atau rata-rata area dengan klasifikasi cuaca tertentu yang dapat diturunkan secara obyektif maupun subyektif. Metode ini secara obyektif dapat meliputi komponen utama, Canonical Correlation Analyses (CCA), aturan Fuzzy, dan Neural Networks. Contoh prosedur pengelompokkan pola cuaca, yaitu European Grosswetterlagen dan British Isles Lamb Weather Types.</p></li>
<li><p>Stokastik</p>
<p>Model WGEN <span class="citation" data-cites="richardson1981">(<a href="#ref-richardson1981" role="doc-biblioref">Richardson 1981</a>)</span> merupakan contoh dari pendekatan ini. Model ini memiliki kemampuan dalam membangkitkan data curah hujan harian berdasarkan peluang kejadian hujan (hujan dan tidak hujan) dengan rantai Markov order satu. Model ini telah digunakan dalam kajian perubahan iklim dan analisis dampak. Model stokastik yang telah diperoleh dari data observasi deret waktu dapat divalidasi dengan GCM dan perlu dikalibrasi terlebih dahulu.</p></li>
<li><p><em>Limited-area climate models</em> (LAM)</p>
<p>Metode terakhir untuk melakukan <em>downscaling</em> terhadap GCM adalah dengan menyematkan model iklim dengan area terbatas. Sebenarnya, LAM pada saat ini dapat diistilahkan sebagai <em>Regional Climate Model</em> (RCM). RCM memiliki resolusi spasial kurang dari 100 km. RCM memerlukan sumber daya komputer yang hampir sama dengan menjalankan GCM. RCM memiliki kemampuan dalam mensimulasikan proses-proses atmosfer pada skala menengah, seperti curah hujan orografis dan konveksi awan atau skala tinggi, seperti turbulensi. Contoh dari RCM adalah Weather Research Forecasting (WRF) <span class="citation" data-cites="skamarock2019">(<a href="#ref-skamarock2019" role="doc-biblioref">Skamarock <em>et al.</em> 2019</a>)</span>.</p></li>
</ol>
<p>Ada dua cara dalam melakukan metode <em>downscaling</em>, yaitu statistik dan dinamik.</p>
<p>Teknik <em>dynamical downscaling</em> dapat menjalankan simulasi berbagai proses fisika (termodinamika, kekekalan energi, dan gerak) untuk setiap skala piksel. Teknik ini membutuhkan kondisi batas menggunakan data GCM dan perlu menentukan pemilihan lokasi spesifik. Teknik ini merujuk pada penggunaan RCM untuk meningkatkan skala spasial dan temporal. Model iklim regional meliputi komponen dinamik, fisik, maupun kimia. Komponen dinamik atmosfer memperhitungkan komponen fisika atmosfer yang mencakup proses-proses fisik, seperti radiasi gelombang panjang dan pendek, presipitasi, dan proses pertukaran energi di permukaan bumi atau laut. Proses pada skala sub-piksel dimodelkan oleh berbagai skema parameterisasi yang tentunya dapat berasal dari perhitungan matematika (integral atau diferensial) serta statistik. Model <em>dynamical downscaling</em> telah tersedia banyak saat ini, seperti <a href="https://github.com/wrf-model/WRF">Weather Research Forecasting (WRF)</a>, <a href="https://github.com/ICTP/RegCM">ICTP Regional Climate Model (RegCM)</a>, Hadley Centre Regional Climate Model (HadRM), <a href="https://www.remo-rcm.de">The Regional Climate Model (REMO)</a>, dan <a href="https://mpas-dev.github.io">The Model for Prediction Across Scale (MPAS)</a>. Model WRF akan dijelaskan pada modul ini, mulai dari instalasi hingga menampilkan hasil.</p>
<p>WRF merupakan salah satu model <em>dynamical downscaling</em> yang saat ini semakin berkembang dengan tujuan riset dan operasional. WRF memiliki spesifikasi dalam berbagai aplikasi prediksi di dalam sistem bumi, seperti kimia atmosfer, hidrologi, kebakaran hutan, siklon, dan iklim regional. Selain simulasi dalam skala regional, WRF telah mampu menjalankan simulasi fenomena cuaca mikro cukup akurat, seperti turbulensi <span class="citation" data-cites="talbot2012">(<a href="#ref-talbot2012" role="doc-biblioref">Talbot <em>et al.</em> 2012</a>)</span> <span class="citation" data-cites="xu2018performance">(<a href="#ref-xu2018performance" role="doc-biblioref">Xu <em>et al.</em> 2018</a>)</span> <span class="citation" data-cites="bao2018large">(<a href="#ref-bao2018large" role="doc-biblioref">Bao <em>et al.</em> 2018</a>)</span>. Sebanyak lebih dari 36.000 pengguna WRF tersebar di 162 negara, termasuk Indonesia yang telah menggunakan WRF untuk kebutuhan operasional <span class="citation" data-cites="powers2017">(<a href="#ref-powers2017" role="doc-biblioref">Powers <em>et al.</em> 2017</a>)</span>. Ada dua jenis model WRF berdasarkan penyelesaian persamaan aliran fluida atmosfer, yaitu <em>Advanced Research WRF</em> (ARW) dan <em>Nonhydrostatic Mesoscale Model</em> (NMM). WRF-ARW dikembangkan oleh National Centre of Atmosphere Research (NCAR), sedangkan WRF-NMM dikembangkan oleh National Centre of Environmental Prediction (NCEP) <span class="citation" data-cites="skamarock2019">(<a href="#ref-skamarock2019" role="doc-biblioref">Skamarock <em>et al.</em> 2019</a>)</span>. Secara umum, WRF mampu melakukan simulasi beberapa komponen <em>Numerical Weather Prediction</em> (NWP) <a href="#fig-nwpkomponen">Gambar&nbsp;<span>2.1</span></a>. Berdasarkan aplikasi tertentu, WRF memiliki beberapa turunan model, seperti WRF-Chem (kimia atmosfer), WRF-Hydro (hidrologi), dan WRF-Fire (kebakaran hutan dan lahan).</p>
<div id="fig-nwpkomponen" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Pictures/param_nwp.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.1: Proses secara umum perlu diparameterisasi di dalam model iklim <span class="citation" data-cites="sonkaew">(<a href="#ref-sonkaew" role="doc-biblioref">Sonkaew <em>et al.</em></a>)</span></figcaption>
</figure>
</div>
<p>WRF diimplementasikan dalam bahasa pemrograman komputer. Jika Anda melihat repositori github <a href="https://github.com/wrf-model/WRF">WRF</a>, jenis bahasa pemrograman yang paling banyak digunakan adalah Fortran yang berisikan algoritme berbagai perhitungan fisika dan kimia. Model WRF dapat dijalankan pada personal komputer hingga super komputer. Sebenarnya, Anda dapat menjalankan WRF dengan hanya 1 prosesor, tetapi mungkin membutuhkan waktu lama akibat dari resolusi spasial dan temporal yang tinggi, serta cakupan pemilihan wilayah yang cukup luas. Proses perhitungan model dinamik maupun fisik akan lebih cepat apabila memakai banyak prosesor atau yang bisa disebut dengan <strong>komputasi paralel</strong>. Kerangka kerja perangkat lunak WRF mendukung komputasi paralel yang efisien pada berbagai platform komputasi. Model atmosfer membawa kumpulan komputasi yang sama di setiap piksel vertikal maupun horizontal <a href="#fig-modeliklim">Gambar&nbsp;<span>2.2</span></a>. Kita mungkin telah mengenal jenis prosesor yang tersedia saat ini, seperti Intel dan AMD. Jenis prosesor yang dibuat dapat mempengaruhi kecepatan proses perhitungan. Untuk perhitungan paralel, Anda dapat menggunakan tipe prosesor desktop, mobile (prosesor di laptop), maupun server, tetapi juga perlu memperhatikan banyaknya <em>core</em> maupun frekuensi yang tertera pada setiap tipe prosesor.</p>
<div id="fig-modeliklim" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Pictures/AtmosphericModelSchematic.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.2: Ilustrasi Model Iklim</figcaption>
</figure>
</div>
<p>Terkait dengan bahasa pemrograman yang digunakan di dalam WRF, yaitu bahasa Fortran dan C, kode skrip terlebih dahulu harus dikompilasi dengan program Compiler. Compiler ini bertujuan mengubah bahasa dari kode yang diketik menjadi bahasa mesin. Ada berbagai macam program Compiler yang tersedia secara gratis, salah satunya adalah <a href="https://gcc.gnu.org/">GNU Compiler Collection (gcc)</a>. Selain GNU, perusahaan seperti <a href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/toolkits.html">Intel</a>, <a href="https://www.amd.com/en/developer/aocc.htm">AMD</a>, maupun <a href="https://docs.nvidia.com/hpc-sdk/compilers/openacc-gs/index.html">NVIDIA</a> juga memiliki program Compiler yang dapat digunakan secara gratis serta mendukung komputasi paralel. Di dalam modul praktikum ini, Anda dapat memilih salah satu dari dua Compiler yang akan dijelaskan, yaitu <strong>GNU</strong> atau <strong>Intel</strong>. Kami mencoba melakukan simulasi WRF dengan 10 kali ulangan pada dua tipe Compiler dan Prosesor. Perbedaan penggunaan tipe Compiler serta Prosesor dapat mempengaruhi waktu simulasi <a href="#fig-wrfbenchmark">Gambar&nbsp;<span>2.3</span></a>.</p>
<div id="fig-wrfbenchmark" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Pictures/WRFBenchmark.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.3: Perbedaan waktu simulasi WRF pada tipe Compiler, Distro, dan Prosesor yang digunakan</figcaption>
</figure>
</div>
</section>
<section id="pemrograman-bash" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="pemrograman-bash"><span class="header-section-number">2.2</span> Pemrograman Bash</h2>
<p>Sebagai salah satu <em>tool scripting</em> yang umum digunakan pada Linux, Bash (<strong>Bourne Again Shell</strong>) sangat bermanfaat bagi para penggunanya. Sebagian besar dalam menjalankan model iklim, Bash digunakan untuk menjalankan instalasi, simulasi, sampai pada analisis data. Pengguna model iklim disarankan mempelajari dasar-dasar pemrograman ini agar memahami berbagai perintah dari cara kerja instalasi dan simulasi dari model iklim tertentu. Para pengembang model iklim biasanya menyediakan dokumen <em>User Guide</em>. File ini berisi mengenai cara instalasi, simulasi, informasi file, dan berbagai aplikasi tambahan dalam mengoperasikan/menjalankan model iklim tersebut. Bagi para pengguna Windows atau MacOS, perhatikan subbab di bawah ini.</p>
<section id="pemrograman-bash-pada-sistem-operasi-windows" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="pemrograman-bash-pada-sistem-operasi-windows"><span class="header-section-number">2.2.1</span> Pemrograman Bash pada Sistem Operasi Windows</h3>
<p>Bagi Anda yang memiliki sistem operasi Windows, Anda diharuskan memasang Windows Subsystem Linux (WSL) untuk dapat menjalankan Bash. Untuk menjalankan WRF, Anda memerlukan sistem operasi berbasis Linux dengan distribusi yang tersedia saat ini. Pada modul ini, distro Ubuntu dipilih untuk simulasi WRF. WSL dapat digunakan bagi pengguna Windows 10/11. WSL dapat dijalankan pada Windows 10/11 dan Windows Server 2019 dengan versi minimum 1803. Saat ini, WSL versi 2 (WSL-2) telah tersedia yang dapat berjalan pada Windows 10 versi 1903 ke atas. Kami merekomendasikan Anda untuk memasang WSL-2 daripada WSL-1 karena prosesnya lebih cepat. Untuk mengaktifkan WSL, Anda dapat mengikuti beberapa langkah berikut ini.</p>
<ol type="1">
<li>Unduh WSL-2 pada <a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">halaman ini</a> dan Install.</li>
<li>Buka menu Control Panel dan cari Program and Features</li>
<li>Klik Turn Windows Features On or Off</li>
<li>Scroll ke paling bawah. Kemudian, aktifkan tanda centang pada <strong>Windows Subsystem for Linux</strong> dan <strong>Virtual Machine Platform</strong></li>
<li>Tunggu proses <em>update</em> sampai selesai, kemudian klik <strong>Restart Now</strong> (pastikan simpan data-data pekerjaan dan tutup semua aplikasi)</li>
<li>Setelah proses <em>restart</em> selesai, cari aplikasi dan unduh Ubuntu pada Microsoft Store</li>
<li>Buka aplikasi Ubuntu yang telah terunduh dan tunggu konfigurasi selesai</li>
<li>Masukkan Username dan Password (<strong>Catatan</strong>: kami sarankan sama dengan user dan pass Windows 10/11, tetapi boleh beda. Hasil ketikan password <strong>tidak</strong> muncul di terminal)</li>
<li>Ketikkan pada terminal <code>bash     sudo apt update</code></li>
<li>Anda juga dapat membuka terminal Ubuntu pada terminal Windows PowerShell atau Command Prompt dengan mengetik <code>wsl</code> atau <code>wsl.exe</code></li>
</ol>
<p>Selain WSL, Anda juga dapat menggunakan <a href="https://www.cygwin.com">Cygwin</a> atau <a href="https://www.mingw-w64.org/">MinGW</a>, hanya saja Anda perlu memilih beberapa paket yang akan digunakan. Tentu cara ini sangat rumit dan membutuhkan waktu cukup lama saat instalasi.</p>
</section>
<section id="instalasi-docker-pada-macos-chipset-m1-dan-m2" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="instalasi-docker-pada-macos-chipset-m1-dan-m2"><span class="header-section-number">2.2.2</span> Instalasi Docker pada MacOS (chipset M1 dan M2)</h3>
<p>Untuk MacOS, aplikasi terminal-nya sudah mendukung Bash, hanya saja WRF tidak bisa dipasang, khususnya pada arsitektur ARM64 (MacBook M1 atau M2). Kami sudah mengikuti langkah-langkah pada website <a href="https://forum.mmm.ucar.edu/threads/instruction-needed-to-install-wrf-v4-3-3-on-mac-with-m1-max-chip-and-version-13-0-1-ventura.12145/">WRF-Forum ini</a>, tetapi masih terdapat kendala. Oleh karena itu, kami menggunakan aplikasi <a href="https://www.docker.com">Docker</a> sebagai solusi.</p>
<ol type="1">
<li><p>Unduh dan pasang Docker untuk MacOS berdasarkan prosesor pada link di bawah ini.</p>
<ul>
<li><a href="https://desktop.docker.com/mac/main/amd64/Docker.dmg?utm_source=docker&amp;utm_medium=webreferral&amp;utm_campaign=dd-smartbutton&amp;utm_location=module&amp;_gl=1*82xl9t*_ga*MTEzNDQyMjkxMy4xNjgxOTE3NjE2*_ga_XJWPQMJYHQ*MTY5MDUzMzA2MS45LjEuMTY5MDUzMzU2NS40OC4wLjA.">MacOS Intel</a></li>
<li><a href="https://desktop.docker.com/mac/main/arm64/Docker.dmg?utm_source=docker&amp;utm_medium=webreferral&amp;utm_campaign=dd-smartbutton&amp;utm_location=module&amp;_gl=1*j0qkct*_ga*MTEzNDQyMjkxMy4xNjgxOTE3NjE2*_ga_XJWPQMJYHQ*MTY5MDUzMzA2MS45LjEuMTY5MDUzMzU2NS40OC4wLjA.">MacOS M1 atau M2</a></li>
</ul></li>
<li><p>Buka aplikasi Docker melalui menu atau melalui terminal dengan perintah berikut ini.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">open</span> <span class="at">-a</span> Docker</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Jendela Docker Desktop akan muncul.</p></li>
<li><p>Kemudian, tutup aplikasi Docker Desktop. Perintah ini tidak memberhentikan proses Docker, hanya menutup mode GUI-nya saja. Aplikasi Docker masih terus berjalan apabila ada <em>icon</em> Docker pada notifikasi.</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pictures/docker-icon.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Icon Docker</figcaption>
</figure>
</div>
<ol start="4" type="1">
<li><p>Bukalah terminal</p></li>
<li><p>Ketikkan perintah berikut untuk mengunduh <em>image</em> Ubuntu versi 20.04</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> pull ubuntu:20.04</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Untuk menjalankan <em>image</em>, ketikkan perintah berikut.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-it</span> <span class="at">--name</span> wrf-ubuntu ubuntu:20.04</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Perintah ini menjalankan <em>image</em> Ubuntu versi 20.04 dan masuk ke <em>container</em> dengan nama <code>wrf-ubuntu</code>. Anda dapat mengetikkan perintah-perintah Bash di dalam <em>container</em> ini.</p></li>
<li><p>Terdapat beberapa perintah yang belum tersedia seperti pada Ubuntu versi Desktop maupun WSL. Misalnya perintah <code>nano</code>, <code>wget</code>, <code>bash-completion</code>, dan <code>git</code>. Untuk mengunduhnya, ketikkan perintah berikut.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> update</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> <span class="at">-y</span> install nano wget git bash-completion</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled" title="Catatan">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Catatan
</div>
</div>
<div class="callout-body-container callout-body">
<p>Untuk selanjutnya, Anda tidak perlu mengetik perintah <code>sudo</code> (seperti pada WSL) di dalam terminal Docker karena Anda sudah masuk sebagai <em>root</em>.</p>
</div>
</div></li>
<li><p>Untuk keluar dari <em>container</em> Ubuntu, ketikkan perintah <code>exit</code> atau dengan shortcut <code>Ctrl + D</code>.</p></li>
<li><p>Jika Anda ingin menjalankan <em>container</em> Ubuntu yang sudah dibuat sebelumnya, ketikkan perintah berikut.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> start <span class="at">-i</span> wrf-ubuntu</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<p>Penggunaan Docker pada MacOS <strong>HANYA</strong> untuk menjalankan WRF saja. Selebihnya pada tahapan analisis/visualisasi data, Anda dapat menggunakan software lain yang masih mendukung MacOS.</p>
</section>
<section id="dasar-dasar-pemrograman-bash" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="dasar-dasar-pemrograman-bash"><span class="header-section-number">2.2.3</span> Dasar-dasar Pemrograman Bash</h3>
<p>Bash merupakan terminal shell umum pada Linux. Anda bisa menjalankan shell lain, seperti ksh (Korn Shell), zsh, dan csh (C shell). Untuk menjalankan Bash, Anda bisa menekan Ctrl+Alt+T atau carilah aplikasi Terminal. Khusus Windows 10, Anda dapat mencari aplikasi “Ubuntu” atau “wsl.exe”. Tampilan Bash seperti pada <a href="#fig-bashubuntu">Gambar&nbsp;<span>2.4</span></a>. Tulisan menunjukkan nama user dan tanda berarti menunjukkan lokasi folder saat ini.</p>
<div id="fig-bashubuntu" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./Pictures/bash_shell.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.4: Bash pada Ubuntu</figcaption>
</figure>
</div>
<p>Jika Anda mengetik perintah <code>pwd</code> pada Bash, hasilnya adalah seperti di bawah ini atau bisa dilihat pada <a href="#fig-bashpwd">Gambar&nbsp;<span>2.5</span></a>.</p>
<div id="fig-bashpwd" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./Pictures/pwd.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.5: Perintah <code>pwd</code> pada terminal Bash</figcaption>
</figure>
</div>
<p>Perintah dasar lainnya yang sering digunakan oleh pengguna Linux adalah <code>ls</code> atau <code>ll</code> (<a href="#fig-lsubuntu">Gambar&nbsp;<span>2.6</span></a>). Perintah ini berfungsi untuk melihat nama folder dan file yang berada di direktori pada lokasi saat ini. Untuk berpindah lokasi folder, Anda dapat mengetik perintah <code>cd</code> dan pilih folder yang ingin dibuka, contohnya <code>cd Documents/</code> atau <code>cd Documents</code> (<a href="#fig-cdubuntu">Gambar&nbsp;<span>2.7</span></a>). Anda dapat kembali ke folder sebelumnya dengan mengetik perintah <code>cd ..</code></p>
<div id="fig-lsubuntu" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./Pictures/ls.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.6: Perintah <code>ls</code> pada terminal Bash</figcaption>
</figure>
</div>
<div id="fig-cdubuntu" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./Pictures/cd.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.7: Perintah <code>cd</code> pada terminal Bash</figcaption>
</figure>
</div>
<p>Anda dapat membuat folder baru dengan perintah <code>mkdir</code>, memindahkan folder atau file dengan <code>mv</code>, menghapus file dengan <code>rm</code>, menghapus folder dengan <code>rmdir</code>, membuat file baru dengan <code>touch</code>, dan menyalin folder atau file dengan <code>cp</code>. Contoh penggunaan beberapa perintah tersebut dapat dilihat sebagai berikut.</p>
<ul>
<li><p>Misalkan kita ingin membuat folder <code>Tes-folder</code></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> Tes-folder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Anda juga dapat membuat lebih dari 1 folder, misalnya <code>Tes-folder-1</code> dan <code>Tes-folder-2</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> Tes-folder-1 Tes-folder-2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Untuk memastikan ketiga folder tersebut telah dibuat, ketik perintah <code>ls</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Misalkan kita ingin membuat file <code>tes-file</code> di dalam folder <code>Tes-folder</code>. Perintah <code>touch</code> bertujuan membuat file kosong.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> Tes-folder</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">touch</span> tes-file</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Kemudian, file <code>tes-file</code> kita pindahkan ke direktori sebelumnya dan diganti namanya dengan <code>tes-file-pindah</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> tes-file ../tes-file-pindah</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Kembali ke folder sebelumnya</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ..</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Ketik perintah <code>ls</code> untuk memastikan file <code>tes-file</code> telah dipindahkan ke direktori sebelumnya dengan berubah nama menjadi <code>tes-file-pindah</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>File <code>tes-file-pindah</code> dihapus menggunakan perintah <code>rm</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> tes-file-pindah</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Untuk menghapus folder, misalkan <code>Tes-folder-1</code>, Anda dapat menggunakan perintah <code>rm</code> dengan ditambahkan parameter <code>-rf</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-rf</span> Tes-folder-1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled" title="Perhatian">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perhatian
</div>
</div>
<div class="callout-body-container callout-body">
<p>Hati-hati dalam menggunakan parameter <code>-rf</code> karena folder yang telah dihapus beserta file-file di dalamnya <strong>tidak</strong> berada di dalam <em>Recycle Bin</em></p>
</div>
</div>
</section>
</section>
<section id="instalasi-software-pengolahan-data-dan-model-wrf" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="instalasi-software-pengolahan-data-dan-model-wrf"><span class="header-section-number">2.3</span> Instalasi Software Pengolahan Data dan Model WRF</h2>
<p>Pada tahapan ini, Kami menjelaskan mengenai tahapan instalasi aplikasi pengolahan data pendukung untuk memproses data luaran WRF serta instalasi model WRF di Ubuntu versi 20.04. Saat kami menguji WRF di Ubuntu, proses instalasi serta simulasi tidak mengalami masalah. Anda dipersilahkan menggunakan distro yang lain, seperti Fedora, CentOS, Almalinux, atau Manjaro, tetapi kami tidak dapat menjamin keberhasilan instalasi dan simulasi pada distro tersebut.</p>
<section id="instalasi-software-pengolahan-data" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="instalasi-software-pengolahan-data"><span class="header-section-number">2.3.1</span> Instalasi Software Pengolahan Data</h3>
<section id="ncar-command-language-ncl-dan-python" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="ncar-command-language-ncl-dan-python">NCAR Command Language (NCL) dan Python</h4>
<p><a href="https://www.ncl.ucar.edu">NCL</a> merupakan bahasa pemrograman interpreter yang dikembangkan oleh National Centre of Atmospheric Research (NCAR) dan memiliki kegunaan dalam proses analisis dan visualisasi data-data cuaca dan iklim. Aplikasi NCL dibutuhkan untuk memvisualisasikan lokasi kajian sebelum disimulasikan. Pengembang WRF telah menyediakan skrip NCL untuk memudahkan dalam ketepatan pemilihan lokasi sesuai dengan keinginan pengguna. <a href="https://www.python.org">Python</a> merupakan bahasa pemrograman general yang memiliki banyak kegunaan, khususnya dalam analisis dan visualisasi data-data dengan tambahan modul (<em>packages</em>). Dalam menuliskan kode Python, Anda dapat menggunakan teks editor yang umum digunakan seperti <a href="https://jupyter.org">Jupyter Notebook</a>. Untuk modul yang akan dipakai dalam praktikum ini adalah <code>wrf-python</code>. Langkah-langkah pemasangan NCL dan Python sebagai berikut.</p>
<ol type="1">
<li><p>Untuk memasang NCL, Anda harus mengunduh aplikasi Miniconda untuk Linux pada website <a href="https://repo.anaconda.com/miniconda/Miniconda3-py39_22.11.1-1-Linux-x86_64.sh">https://repo.anaconda.com/miniconda/Miniconda3-py39_22.11.1-1-Linux-x86_64.sh</a> dengan perintah pada terminal Bash sebagai berikut.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://repo.anaconda.com/miniconda/Miniconda3-py39_22.11.1-1-Linux-x86_64.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Anda tidak dapat menggunakan NCL pada sistem operasi Windows, kecuali Anda memiliki Windows Subsystem Linux (WSL).</p></li>
<li><p>Kemudian, lakukan pemasangan Miniconda dengan perintah di bawah ini.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> Miniconda3-py39_22.11.1-1-Linux-x86_64.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Selanjutnya tekan ENTER. Terminal akan menampilkan <em>End-User License Agreement</em> (EULA), tekan ENTER atau SPACE sampai muncul perintah seperti di bawah ini.</p>
<pre><code>Do you accept the license terms? [yes|no]
[no] &gt;&gt;&gt;</code></pre></li>
<li><p>Kemudian, ketikkan <code>yes</code> untuk melanjutkan proses instalasi dan tekan ENTER. Secara otomatis, Python sebenarnya telah terpasang di dalam Miniconda.<br>
</p></li>
<li><p>Tutup terminal Anda dan buka kembali. Perhatikan pada tulisan <code>(base)</code> di paling kiri nama user. Jika tulisan tersebut sudah muncul, proses pemasangan Miniconda telah berhasil.</p></li>
<li><p>Selanjutnya, lakukan pemasangan package <code>mamba</code> dengan perintah.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install mamba <span class="at">-n</span> base <span class="at">-c</span> conda-forge</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled" title="Catatan">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Catatan
</div>
</div>
<div class="callout-body-container callout-body">
<p>Package <a href="https://mamba.readthedocs.io/en/latest/installation.html">mamba</a> memungkinkan dapat mempercepat pengunduhan dan pemasangan package-package di dalam Miniconda.</p>
</div>
</div>
<ol start="7" type="1">
<li><p>Lakukan proses pembuatan <em>environment</em> dengan nama <code>ncl</code> dan pemasangan NCL beserta package lainnya dengan perintah.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">-n</span> ncl</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate ncl</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="ex">mamba</span> install <span class="at">-c</span> conda-forge jupyter notebook xarray netcdf4 scipy pyngl pynio matplotlib cartopy wrf-python ncl </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled" title="Perhatian">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Perhatian
</div>
</div>
<div class="callout-body-container callout-body">
<p>Saat modul ini dibuat, paket <code>wrf-python</code> belum mendukung arsitektur MacOS M1/M2, baik di terminal MacOS maupun terminal Linux melalui Docker, kecuali MacOS Intel. Kami sarankan Anda dapat menggunakan aplikasi lainnya seperti RStudio, Julia, atau Python untuk pengolahan data luaran WRF.</p>
</div>
</div>
<ol start="8" type="1">
<li><p>Saat Anda ingin memulai menggunakan program NCL, aktifkan terlebih dahulu <em>environment</em> <code>ncl</code> dengan perintah di bawah ini. Kemudian, tulisan <code>(base)</code> menjadi <code>(ncl)</code> yang menandakan bahwa <em>environment</em> telah berhasil diaktifkan.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate ncl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Untuk membuka <strong>Jupyter Notebook</strong>, gunakan perintah ini. Aplikasi akan muncul pada browser bawaan Anda (Google Chrome, Microsoft Edge, atau Safari).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">jupyter</span> notebook</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Untuk menutup Jupyter Notebook, Anda dapat menekan tombol <code>CTRL+C</code> pada terminal.</p></li>
<li><p>Untuk keluar dari <em>environment</em> <code>ncl</code>, ketikkan perintah <code>conda deactivate</code>.</p></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled" title="Catatan">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Catatan
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Environment</em> <code>ncl</code> akan terus dipakai, mulai dari pemasangan WRF hingga analisis dan visualisasi luaran WRF. NCAR telah mengembangkan <code>wrf-python</code> secara khusus untuk analisis dan visualisasi luaran WRF.</p>
</div>
</div>
</section>
<section id="r-dan-rstudio" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="r-dan-rstudio">R dan RStudio</h4>
<p>Sama seperti Python dan NCL, R merupakan bahasa pemrograman interpreter, namun dibuat secara khusus untuk analisis dan visualisasi data-data statistik. Beberapa package R telah dikembangkan untuk memudahkan proses analisis data-data cuaca dan iklim, seperti <code>ncdf4</code>, <code>raster</code>, dan <code>metR</code>. <a href="https://posit.co">RStudio</a> umum digunakan dalam mengetik bahasa pemrograman R secara interaktif. Untuk menuliskan skrip R, dibutuhkan aplikasi teks editor, salah satunya adalah RStudio. RStudio mendukung bukan hanya menuliskan skrip R, melainkan bahasa pemrograman lainnya, seperti Markdown, C++, Javascript, dan Python. Sebenarnya, Anda dapat menuliskan skrip Python pada RStudio dengan bantuan package <a href="https://rstudio.github.io/reticulate/"><code>reticulate</code></a>. Hanya saja di dalam modul ini, Kami menggunakan <em>Jupyter Notebook</em> untuk menuliskan skrip Python.</p>
<p>Untuk mengunduh R dan RStudio Desktop, Anda dapat menggunakan halaman website di bawah ini sesuai dengan sistem operasi yang Anda gunakan. Bagi pengguna <strong>Windows</strong>, Anda diharuskan mengunduh aplikasi <a href="https://cran.r-project.org/bin/windows/Rtools/rtools43/rtools.html">Rtools</a> karena beberapa paket tertentu membutuhkan kompilasi dengan Compiler GNU pada saat proses instalasi, seperti <code>raster</code>, <code>tidyverse</code>, dan <code>ncdf4</code>.</p>
<ul>
<li>R
<ul>
<li>Windows 10/11: <a href="https://cran.r-project.org/bin/windows/base/R-4.2.2-win.exe">https://cran.r-project.org/bin/windows/base/R-4.2.2-win.exe</a></li>
<li>MacOS (Intel): <a href="https://cran.r-project.org/bin/macosx/base/R-4.2.2.pkg">https://cran.r-project.org/bin/macosx/base/R-4.2.2.pkg</a></li>
<li>MacOS (ARM, M1/M2): <a href="https://cran.r-project.org/bin/macosx/big-sur-arm64/base/R-4.2.2-arm64.pkg">https://cran.r-project.org/bin/macosx/big-sur-arm64/base/R-4.2.2-arm64.pkg</a></li>
<li>Ubuntu: ikuti perintah dan langkah-langkah di <a href="https://cran.r-project.org/bin/linux/ubuntu">https://cran.r-project.org/bin/linux/ubuntu</a></li>
</ul></li>
<li>RStudio
<ul>
<li>Windows 10/11: <a href="https://download1.rstudio.org/electron/windows/RStudio-2022.12.0-353.exe">https://download1.rstudio.org/electron/windows/RStudio-2022.12.0-353.exe</a></li>
<li>MacOS (Intel/ARM): <a href="https://download1.rstudio.org/electron/macos/RStudio-2022.12.0-353.dmg">https://download1.rstudio.org/electron/macos/RStudio-2022.12.0-353.dmg</a></li>
<li>Ubuntu 22.04 LTS: <a href="https://download1.rstudio.org/electron/jammy/amd64/rstudio-2022.12.0-353-amd64.deb">https://download1.rstudio.org/electron/jammy/amd64/rstudio-2022.12.0-353-amd64.deb</a></li>
</ul></li>
</ul>
</section>
<section id="julia" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="julia">Julia</h4>
<p>Bahasa pemrograman ini relatif baru dibandingkan dengan Python dan R. Sama seperti keduanya, Julia merupakan bahasa pemrograman interpreter dan tersedia gratis. Pengembang Julia mengatakan bahwa bahasa ini memiliki kecepatan eksekusi secepat bahasa C/C++. Artinya, kecepatan eksekusi Julia berpotensi lebih cepat daripada Python maupun R. Anda dapat mengunduh Julia di <a href="https://julialang.org">julialang.org</a> sesuai dengan sistem operasi yang Anda miliki. Untuk membaca data netcdf dari WRF, Anda dapat menggunakan package <code>NetCDF.jl</code>. Anda perlu memasang package tersebut pada terminal interaktif Julia. Untuk menuliskan skrip Julia, Anda dapat memanfaatkan <strong>Jupyter Notebook</strong> dan tentunya memerlukan package <code>IJulia.jl</code>. Berikut ini adalah langkah-langkahnya.</p>
<ol type="1">
<li><p>Buka terminal interaktif Julia (julia) dan ketikkan perintah berikut untuk memasang package <code>NetCDF.jl</code> dan <code>IJulia.jl</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Pkg</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">"NetCDF"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">"IJulia"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Setelah berhasil memasang package, Anda dapat menuliskan skrip Julia pada Jupyter Notebook. Untuk membuka Jupyter Notebook, ketikkan perintah berikut pada terminal interaktif Julia.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">IJulia</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">notebook</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Skrip tersebut akan mengeksekusi instalasi miniconda di dalam Julia dengan disertai <strong>Jupyter Notebook</strong>. Jika instalasi berhasil, <strong>Jupyter Notebook</strong> akan terbuka di browser Anda (Google Chrome, Microsoft Edge, atau Safari). Untuk menutup Jupyter Notebook, Anda dapat menekan tombol <code>CTRL+C</code> pada terminal interaktif Julia.</p></li>
</ol>
</section>
</section>
<section id="sebelum-mulai" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="sebelum-mulai"><span class="header-section-number">2.3.2</span> Sebelum Mulai</h3>
<p>Anda perlu mencoba dasar pemrograman Bash sebelum memulai mengunduh data, memasang beberapa package, sampai menjalankan simulasi WRF. Silahkan Anda ikuti langkah-langkah di bawah ini agar memudahkan dalam mencoba praktikum ini.</p>
<ol type="1">
<li><p>Buka terminal Bash</p>
<ul>
<li><p>Untuk Windows 10/11, buka aplikasi Windows Power Shell. Kemudian, ketikkan perintah seperti di bawah ini. Setelahnya, akan muncul terminal Bash.</p>
<pre class="shell"><code>wsl</code></pre></li>
<li><p>Untuk Ubuntu atau disto Linux lainnya, carilah program <strong>Terminal</strong> atau bisa menggunakan shortcut <strong>Ctrl+Alt+T</strong></p></li>
<li><p>Untuk MacOS M1/M2 menggunakan Docker, jalankan <em>image</em> Ubuntu versi 20.04 pada terminal dengan perintah di bawah ini.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-it</span> <span class="at">--name</span> wrf-ubuntu ubuntu:20.04</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
<li><p>Saat Anda membuka terminal, pastikan lokasi folder/direktori saat ini adalah <code>/home/&lt;user_name&gt;</code>, di mana <code>user_name</code> adalah nama user pada laptop/komputer Anda masing-masing. Perhatikan kembali <a href="#fig-bashpwd">Gambar&nbsp;<span>2.5</span></a> bahwa untuk melihat lokasi direktori Anda sekarang bisa mengetik perintah <code>pwd</code> pada terminal atau dengan melihat simbol <code>~</code> yang terletak di sebelah kiri <code>$</code>. Untuk Docker, lokasi direktori saat ini adalah <code>/</code>. Lokasi <code>$HOME</code> berada di folder <code>/root</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$HOME</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Buat folder kerja dengan nama <code>WRF-Model</code> untuk menampung data-data, package, serta source code WRF. Perintah pada terminal Bash adalah sebagai berikut.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> WRF-Model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Kemudian, bukalah folder <code>WRF-Model</code> (atau dengan nama lainnya) dengan perintah</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> WRF-Model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Sekarang, Anda berada di folder <code>WRF-Model</code> (Perhatikan <code>~</code> berubah menjadi <code>~/WRF-Model</code>)</p></li>
<li><p>Di dalam <code>WRF-Model</code>, buatlah folder <code>data</code> guna untuk meletakkan data masukan WRF (data statik dan data cuaca).</p></li>
<li><p>Unduh <em>source code</em> WPS (WRF Pre-Processing) dan WRF pada halaman <a href="https://www.github.com/wrf-model">Github NCAR</a>. <em>Source code</em> WRF berisikan algoritma perhitungan fisik dan dinamik atmosfer, sedangkan WPS berisikan algoritma persiapan data masukan atmosfer dari GCM dan pemilihan lokasi dan waktu. Gunakan perintah di bawah ini.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Unduh WPS</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://www.github.com/wrf-model/WPS</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Unduh WRF</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://www.github.com/wrf-model/WRF</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<p>Langkah-langkah di atas masih berlanjut pada subbab selanjutnya.</p>
</section>
<section id="data-dan-software-pendukung" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="data-dan-software-pendukung"><span class="header-section-number">2.3.3</span> Data dan Software Pendukung</h3>
<section id="software-pendukung" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="software-pendukung">Software Pendukung</h4>
<p>Untuk memasang WRF, Anda perlu menyiapkan perangkat lunak pendukung serta data contoh untuk mensimulasikan WRF. Perangkat lunak tersebut dapat diunduh melalui halaman <a href="https://www.github.com/agungbaruna/pyWRF-install">Github ini</a>. Untuk mengunduh source code, pilih <strong>&lt;&gt; Code</strong> <span class="math inline">\(\rightarrow\)</span> <strong>Download ZIP</strong> (<a href="#fig-download-source-code">Gambar&nbsp;<span>2.8</span></a>). Anda dapat mengunduh secara manual atau menggunakan perintah <code>git clone</code> pada terminal.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt <span class="at">-y</span> install git <span class="co">#Install program git jika belum ada</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://www.github.com/agungbaruna/pyWRF-install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-download-source-code" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Pictures/pyWRF-install.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.8: Unduh source code</figcaption>
</figure>
</div>
</section>
<section id="data" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="data">Data</h4>
<p>Data-data masukan untuk WRF telah tersedia dan unduh pada halaman web <a href="https://s.id/wrf-data">https://s.id/wrf-data</a>. Kami menyarankan untuk menggunakan Wi-Fi karena ukuran data cukup besar. Data yang telah diunduh Anda pindahkan ke folder <code>data</code> yang berada di dalam <code>WRF-Model</code>.</p>
</section>
<section id="global-forecast-system-gfs" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="global-forecast-system-gfs">1. Global Forecast System (GFS)</h4>
<p>Untuk data masukan yang digunakan berasal dari NOAA yang bernama Global Forecasts System (GFS). GFS memiliki resolusi spasial <span class="math inline">\(0.25^o\)</span> (~25 km), <span class="math inline">\(0.50^o\)</span> (~50 km), dan <span class="math inline">\(1.00^o\)</span> (~ 100 km). GFS memiliki produk data prakiraan maupun analisis/historis cuaca secara global dengan resolusi temporal per 1 dan 3 jam. Anda dapat mengunduh data ini pada salah satu halaman web berikut.</p>
<ul>
<li><strong>AWS S3</strong>: <a href="https://noaa-gfs-bdp-pds.s3.amazonaws.com">https://noaa-gfs-bdp-pds.s3.amazonaws.com</a></li>
<li><strong>Resarch Data Archive (RDA) NCAR</strong>: <a href="https://rda.ucar.edu/datasets/ds084.1">https://rda.ucar.edu/datasets/ds084.1</a></li>
<li><strong>NCEP Central Operations</strong>: <a href="https://nomads.ncep.noaa.gov/">https://nomads.ncep.noaa.gov/</a></li>
</ul>
<p>Data GFS yang digunakan dalam praktikum ini memiliki waktu 1-3 Januari 2022 pada pukul 00:00, 06:00, 12:00, dan 18:00 UTC dengan resolusi spasial <span class="math inline">\(1.00^o\)</span> yang telah diunduh pada halaman web AWS S3 Bucket.</p>
</section>
<section id="era5" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="era5">2. ERA5</h4>
<p>Selain GFS, Anda dapat menggunakan data masukan dari institusi lain, seperti ECMWF pada produk ERA5. ERA5 merupakan data reanalisis sehingga hanya memiliki produk historis. Anda dapat mengunduhnya melalui Climate Data Store (CDS) pada halaman <a href="https://cds.climate.copernicus.eu">https://cds.climate.copernicus.eu</a>. ERA5 memiliki resolusi spasial sebesar <span class="math inline">\(0.25^o\)</span> dengan temporal per 1 jam. Data ERA5 memiliki dua tipe, yaitu data permukaan tanah (<em>Single Levels</em>) dan atmosfer untuk setiap ketinggian (<em>Pressure Levels</em>). Anda diharuskan mengunduh dua tipe data ini dengan variabel yang dipilih adalah sebagai berikut.</p>
<ul>
<li><p><a href="https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-pressure-levels?tab=overview">ERA5 hourly data on Pressure Levels</a>:</p>
<table class="table">
<tbody>
<tr class="odd">
<td style="text-align: center;">geopotential</td>
<td style="text-align: center;">relative humidity</td>
<td style="text-align: center;">specific humidity</td>
</tr>
<tr class="even">
<td style="text-align: center;">temperature</td>
<td style="text-align: center;">u-component wind</td>
<td style="text-align: center;">v-component wind</td>
</tr>
</tbody>
</table></li>
<li><p><a href="https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels?tab=overview">ERA5 hourly data on Single Levels</a>:</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: center;">10m u-component of wind</td>
<td style="text-align: center;">10m v-component of wind</td>
<td style="text-align: center;">2m dewpoint temperature</td>
</tr>
<tr class="even">
<td style="text-align: center;">2m temperature</td>
<td style="text-align: center;">land sea mask</td>
<td style="text-align: center;">mean sea level pressure</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sea ice cover</td>
<td style="text-align: center;">sea surface temperature</td>
<td style="text-align: center;">skin temperature</td>
</tr>
<tr class="even">
<td style="text-align: center;">snow depth</td>
<td style="text-align: center;">soil temperature level 1</td>
<td style="text-align: center;">soil temperature level 2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">soil temperature level 3</td>
<td style="text-align: center;">soil temperature level 4</td>
<td style="text-align: center;">surface pressure</td>
</tr>
<tr class="even">
<td style="text-align: center;">volumetric soil water layer 1</td>
<td style="text-align: center;">volumetric soil water layer 2</td>
<td style="text-align: center;">volumetric soil water layer 3</td>
</tr>
<tr class="odd">
<td style="text-align: center;">volumetric soil water layer 4</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table></li>
</ul>
<p>Anda tidak diharuskan mengunduh semua waktu karena CDS membatasi banyaknya permintaan data dari pengguna sehingga Anda tidak dapat mengunduh semua data sekaligus. Data ERA5 yang akan digunakan pada praktikum ini memiliki waktu yang sama dengan GFS.</p>
</section>
<section id="data-statik-wps" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="data-statik-wps">3. Data Statik WPS</h4>
<p>Data statik ini wajib diunduh untuk menjalankan WRF. Isi data ini seperti tipe permukaan lahan, nilai Leaf Area Index (LAI), tipe tanah, dan elevasi permukaan. Anda dapat mengunduhnya di <a href="https://www2.mmm.ucar.edu/wrf/src/wps_files/geog_high_res_mandatory.tar.gz">https://www2.mmm.ucar.edu/wrf/src/wps_files/geog_high_res_mandatory.tar.gz</a>. File tersebut berukuran 2 GB dan setelah diekstrak dapat mencapai 30 GB. Data ini sudah tersedia di dalam link <a href="https://s.id/wrf-data">https://s.id/wrf-data</a>. Untuk mengekstraknya, gunakan perintah berikut.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> data</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gunzip</span> geog_high_res_mandatory.tar.gz</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> geog_high_res_mandatory.tar</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> .. <span class="co"># Kembali ke folder WRF-Model</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Selanjutnya, folder <code>WPS_GEOG</code> akan muncul di dalam folder <code>data/</code></p>
</section>
</section>
<section id="instalasi-software-compiler" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="instalasi-software-compiler"><span class="header-section-number">2.3.4</span> Instalasi Software Compiler</h3>
<p>Instalasi ini meliputi cara melakukan kompilasi dengan dua Compiler berbeda, yaitu GNU dan Intel. Anda dipersilahkan memilih salah satu langkah. Proses kompilasi untuk semua package yang telah terunduh tidak dapat dilakukan pada Compiler yang berbeda.</p>
<section id="gnu" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="gnu">1. GNU</h4>
<p>Sebelum Anda memasuki tahapan instalasi package yang terdapat dalam folder <code>pyWRF-install</code>, pasang terlebih dahulu package dependencies dengan perintah di bawah ini.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt <span class="at">-y</span> update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt <span class="at">-y</span> upgrade</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt <span class="at">-y</span> install gfortran gcc make m4 csh g++</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="intel" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="intel">2. Intel</h4>
<p>Berbeda dengan GNU, tipe Compiler Intel memang agak rumit untuk memasangnya. Namun, Compiler ini sebenarnya lebih efisien dalam hal kecepatan saat mensimulasikan WRF. Kami sudah membandingkan waktu simulasi dengan Compiler tipe ini lebih cepat dibandingkan dengan GNU <a href="#fig-wrfbenchmark">Gambar&nbsp;<span>2.3</span></a>.</p>
<p>Anda dapat memperoleh software ini di halaman resmi <a href="https://www.intel.com/content/www/us/en/developer/articles/tool/oneapi-standalone-components.html">Intel</a>. Kami sudah menyediakan software tersebut pada tautan <a href="https://s.id/wrf-intel-compiler">s.id/wrf-intel-compiler</a>. Terdapat 2 file instalasi Compiler, yaitu Fortran, C, dan MPI (untuk komputasi paralel). Jumlah ukuran 2 file tersebut cukup besar, sekitar 5 GB. Letakkan 2 file ini di dalam folder <code>WRF-Model</code>. Perhatikan langkah-langkah berikut ini.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Package pendukung</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt <span class="at">-y</span> install make m4 csh</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. oneAPI Base Toolkit</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> l_BaseKit_p_2023.1.0.46401_offline.sh <span class="at">-a</span> <span class="at">-s</span> <span class="at">--eula</span> accept</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. oneAPI HPC Toolkit</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> l_HPCKit_p_2023.1.0.46346_offline.sh <span class="at">-a</span> <span class="at">-s</span> <span class="at">--eula</span> accept</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Lokasi folder hasil instalasi terdapat di <code>$HOME/intel</code>. Perintah untuk memanggil program Compiler Intel belum menjadi <strong>ENVIRONMENT VARIABLE</strong>. Untungnya, Intel menyediakan skrip untuk memanggil semua program Compiler secara default, yaitu terdapat di dalam <code>$HOME/intel/oneapi/setvars.sh</code>. Ketika memanggil skrip tersebut, <strong>ENVINRONMENT VARIABLE</strong> milik Miniconda secara otomatis dinonaktifkan (tulisan <code>&lt;base&gt;</code> hilang). Perintah untuk memanggil skrip <code>setvars.sh</code> adalah sebagai berikut.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> <span class="va">$HOME</span>/intel/oneapi/setvars.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="instalasi-package" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="instalasi-package"><span class="header-section-number">2.3.5</span> Instalasi Package</h3>
<p>Instalasi beberapa package meliputi <code>zlib</code>, <code>libpng</code>, <code>jasper</code>, <code>hdf5</code>, <code>netcdf-c</code>, dan <code>netcdf-fortran</code>. Perlu diperhatikan dan lihat pada terminal bahwa Anda berada di folder <code>~/WRF-Model</code>. Masukkan beberapa perintah <strong>ENVIRONMENT VARIABEL</strong> di bawah ini dengan perintah <code>export</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">ODIR</span><span class="op">=</span><span class="va">$HOME</span>/WRF-Model</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="va">$ODIR</span>/bin:<span class="va">$PATH</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">LD_LIBRARY_PATH</span><span class="op">=</span><span class="va">$ODIR</span>/lib:<span class="va">$LD_LIBRARY_PATH</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">LDFLAGS</span><span class="op">=</span>-L<span class="va">$ODIR</span>/lib</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">CPPFLAGS</span><span class="op">=</span>-I<span class="va">$ODIR</span>/include</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">NETCDF</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">HDF5</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">JASPERLIB</span><span class="op">=</span><span class="va">$ODIR</span>/lib</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">JASPERINC</span><span class="op">=</span><span class="va">$ODIR</span>/include</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Langkah ini wajib dilakukan pada saat melakukan instalasi package, WRF, dan WPS. Pendefinisian <strong>ENVIRONMENT VARIABLE</strong> ini berlaku untuk GNU maupun Intel.</p>
<section id="gnu-1" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="gnu-1">1. GNU</h4>
<p>Berikut ini langkah-langkah memasang package pada Compiler <strong>GNU</strong>. Buka terlebih dahulu folder <code>pyWRF-install/libraries</code> dengan mengetik perintah <code>cd pyWRF-install/libraries</code>. Kemudian, ikuti langkah-langkah berikut ini.</p>
<ol type="1">
<li><p>zlib</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> zlib-1.2.13.tar.gz</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> zlib-1.2.13</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>gcc <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> check install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>libpng</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> libpng-1.6.37.tar.gz</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> libpng-1.6.37</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>gcc <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> check install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>jasper</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> jasper-1.900.1.tar.gz  </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> jasper-1.900.1</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>gcc <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> check install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Bagi pengguna MacOS M1/M2 dengan terminal Docker, gunakan perintah berikut ini untuk instalasi Jasper.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> jasper-1.900.1.tar.gz  </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> jasper-1.900.1</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Mengunduh config.guess</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> <span class="at">-N</span> <span class="at">-O</span> acaux/config.guess <span class="st">"http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD"</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Konfigurasi</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>gcc <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Instalasi</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> check install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>openMPI</p>
<p>Jika Anda berencana menjalankan WRF hanya dengan 1 prosesor, Anda dapat melewati langkah ini. Akan tetapi, kami menyarankan untuk memasang program ini untuk mempersingkat waktu simulasi WRF.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> openmpi-4.1.4.tar.gz  </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> openmpi-4.1.4</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>gcc <span class="va">FC</span><span class="op">=</span>gfortran <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>hdf5</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> hdf5-1.12.0.tar.gz </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> hdf5-1.12.0</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>gcc <span class="va">FC</span><span class="op">=</span>gfortran <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span> <span class="at">--with-default-api-version</span><span class="op">=</span>v18 <span class="at">--enable-fortran</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>netcdf-c</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> netcdf-c-4.7.4.tar.gz </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> netcdf-c-4.7.4</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>gcc <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span> <span class="at">--disable-dap</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>netcdf-fortran</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> netcdf-fortran-4.5.3.tar.gz </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> netcdf-fortran-4.5.3</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>gcc <span class="va">FC</span><span class="op">=</span>gfortran <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="intel-1" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="intel-1">2. Intel</h4>
<p>Berikut ini langkah-langkah memasang package pada Compiler <strong>Intel</strong>. Buka terlebih dahulu folder <code>pyWRF-install/libraries</code> dengan mengetik perintah <code>cd pyWRF-install/libraries</code>. Untuk proses instalasi menggunakan Intel, sama saja dengan GNU. Hanya saja, perbedaannya adalah definisi dari variabel <code>CC</code> maupun <code>FC</code>. Untuk Intel, variabel <code>CC=icc</code> dan <code>FC=ifort</code>. Jangan lupa untuk mengaktifkan <strong>ENVIRONMENT VARIABLE</strong> dari Intel dengan mengetik perintah ini!</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/intel/oneapi/setvars.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol type="1">
<li><p>zlib</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> zlib-1.2.13.tar.gz</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> zlib-1.2.13</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>icc <span class="va">CFLAGS</span><span class="op">=</span><span class="st">'-diag-disable=10441'</span> <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> check install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>libpng</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> libpng-1.6.37.tar.gz</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> libpng-1.6.37</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>icc <span class="va">CFLAGS</span><span class="op">=</span><span class="st">'-diag-disable=10441'</span> <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> check install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>jasper</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> jasper-1.900.1.tar.gz  </span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> jasper-1.900.1</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>icc <span class="va">CFLAGS</span><span class="op">=</span><span class="st">'-diag-disable=10441'</span> <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> check install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>hdf5</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> hdf5-1.12.0.tar.gz </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> hdf5-1.12.0</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>icc <span class="va">FC</span><span class="op">=</span>ifort <span class="va">CFLAGS</span><span class="op">=</span><span class="st">'-diag-disable=10441'</span> <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span> <span class="at">--with-default-api-version</span><span class="op">=</span>v18 <span class="at">--enable-fortran</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>netcdf-c</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> netcdf-c-4.7.4.tar.gz </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> netcdf-c-4.7.4</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>icc <span class="va">CFLAGS</span><span class="op">=</span><span class="st">'-diag-disable=10441'</span> <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span> <span class="at">--disable-dap</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>netcdf-fortran</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Buka folder libraries</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/pyWRF-install/libraries</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Extract </span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> netcdf-fortran-4.5.3.tar.gz </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Buka folder hasil ekstrak</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> netcdf-fortran-4.5.3</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Konfigurasi </span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="va">CC</span><span class="op">=</span>icc <span class="va">FC</span><span class="op">=</span>ifort <span class="va">CFLAGS</span><span class="op">=</span><span class="st">'-diag-disable=10441'</span> <span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span><span class="va">$ODIR</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Instalasi</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
</section>
<section id="instalasi-wrf" class="level3" data-number="2.3.6">
<h3 data-number="2.3.6" class="anchored" data-anchor-id="instalasi-wrf"><span class="header-section-number">2.3.6</span> Instalasi WRF</h3>
<p>Proses instalasi WRF membutuhkan waktu agak lama, yaitu sekitar 30-60 menit. Tentunya, ini bergantung pada spesifikasi prosesor yang Anda gunakan, serta tipe Compiler. Ikuti langkah-langkah berikut.</p>
<ol type="1">
<li><p>Buka direktori <code>WRF</code> yang berada di dalam <code>$ODIR/WRF</code> dengan perintah.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/WRF</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Jalankan file <code>configure</code> dengan perintah.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Anda akan disajikan beberapa teks di dalamnya. Anda disuruh untuk memilih opsi Compiler. Tipe Compiler tersebut selain GNU dan Intel, ada pula IBM, PGI, Fujitsu, Pathscale, dan CRAY. Jika Anda menggunakan Compiler tipe GNU, ketikkan angka <strong>35</strong>. Untuk Intel, ketik angka <strong>16</strong>. Setelah itu, tekan Enter.</p>
<img src="Pictures/wrf-configure-gnu.png" class="img-fluid" style="width:50.0%" alt="Konfigurasi WRF dengan Compiler GNU">
<img src="Pictures/wrf-configure-intel.png" class="img-fluid" style="width:50.0%" alt="Konfigurasi WRF dengan Compiler GNU"></li>
<li><p>Untuk melakukan instalasi, ketik perintah ini.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./compile</span> em_real <span class="at">-j</span> jumlah_prosesor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>dimana <code>jumlah_prosesor</code> adalah jumlah dari prosesor pada laptop/komputer Anda yang akan digunakan untuk proses instalasi dan kompilasi kode-kode WRF. Proses kompilasi akan memakan waktu yang sangat lama apabila Anda hanya menggunakan 1 prosesor. Pastikan berbagai program pada komputer/laptop Anda yang saat ini sedang dibuka, seperti Google Chrome atau Spotify harap ditutup terlebih dahulu karena ini membantu proses instalasi lebih stabil.</p></li>
<li><p><strong>Untuk Compiler Intel</strong>, setelah langkah ke-2 dijalankan, buka file <code>configure.wrf</code> dengan perintah.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> configure.wrf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Kemudian, scroll ke bawah dengan menekan tombol <span class="math inline">\(\downarrow\)</span> pada keyboard dan ubahlah isinya sesuai aturan pada tabel di bawah ini.</p>
<div id="tbl-dm" class="anchored">
<table class="table">
<caption>Tabel&nbsp;2.1: Pengubahan variabel <code>DM_FC</code> dan <code>DM_CC</code></caption>
<thead>
<tr class="header">
<th style="text-align: center;">Sebelum</th>
<th style="text-align: center;">Sesudah</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>DM_FC = mpif90 -f90=$(SFC)</code></td>
<td style="text-align: center;"><code>DM_FC = mpiifort -f90=$(SFC)</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>DM_CC = mpicc -cc=$(SCC)</code></td>
<td style="text-align: center;"><code>DM_CC = mpiicc -cc=$(SCC)</code></td>
</tr>
</tbody>
</table>
</div>
<p>Setelah selesai diubah, keluar dari editor nano dengan menekan tombol <strong>Ctrl + X</strong></p></li>
</ol>
<p>Proses instalasi WRF berhasil dilakukan apabila terdapat file yang berekstensi <code>.exe</code>: <code>ndown.exe</code>, <code>tc.exe</code>, <code>real.exe</code>, dan <code>wrf.exe</code> di dalam folder <code>main</code>. Anda bisa melihatnya dengan perintah</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> main/<span class="pp">*</span>.exe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>main/ndown.exe  main/real.exe  main/tc.exe  main/wrf.exe</code></pre>
<p>Untuk pengguna <strong>MacOS M1/M2</strong> dengan <strong>Docker</strong>, ikuti langkah-langkah berikut.</p>
<ol type="1">
<li><p>Buka direktori <code>WRF</code> yang berada di dalam <code>$ODIR/WRF</code>.</p></li>
<li><p>Ubah file <code>arch/configure.defaults</code> menggunakan teks editor <code>nano</code> dengan menambahkan teks ini.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> arch/configure.defaults</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>########################################################################################################################
#ARCH Linux aarch64, Arm compiler OpenMPI # serial smpar dmpar dm+sm#
DESCRIPTION     =      GCC ($SFC/$SCC): Aarch64
DMPARALLEL      =
OMPCPP          =      -fopenmp
OMP             =      -fopenmp
OMPCC           =      -fopenmp
SFC             =      gfortran
SCC             =      gcc
CCOMP           =      gcc
DM_FC           =      mpif90
DM_CC           =      mpicc -DMPI2_SUPPORT
FC              =      CONFIGURE_FC
CC              =      CONFIGURE_CC
LD              =      $(FC)
RWORDSIZE       =      CONFIGURE_RWORDSIZE
PROMOTION       =
ARCH_LOCAL      =
CFLAGS_LOCAL    =      -w -O3 -c
LDFLAGS_LOCAL   =      -fopenmp
FCOPTIM         =      -Ofast -march=armv8.2-a+fp16+rcpc+dotprod+crypto -fopenmp -frecursive -funroll-loops
FCREDUCEDOPT    =      $(FCOPTIM)
FCNOOPT         =      -O0 -fopenmp -frecursive
FCDEBUG         =      -g $(FCNOOPT)
FORMAT_FIXED    =      -ffixed-form -ffixed-line-length-0 -Wno-invalid-pch -Wno-argument-mismatch
FORMAT_FREE     =      -ffree-form -ffree-line-length-0 -Wno-argument-mismatch -Wno-invalid-pch
FCSUFFIX        =
BYTESWAPIO      =      -fconvert=big-endian -frecord-marker=4
FCBASEOPTS      =      -w $(FORMAT_FREE) $(BYTESWAPIO)
MODULE_SRCH_FLAG=      -I$(WRF_SRC_ROOT_DIR)/main
TRADFLAG        =      -traditional-cpp
CPP             =      /lib/cpp CONFIGURE_CPPFLAGS
AR              =      ar
ARFLAGS         =      ru
M4              =      m4 -B 14000
RANLIB          =      ranlib
RLFLAGS         =
CC_TOOLS        =      $(SCC)</code></pre></li>
<li><p>Jalankan program <code>configure</code> dengan perintah ini.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Kemudian, pilih nomor 4 untuk memilih opsi <strong>Linux aarch64, Arm compiler OpenMPI # serial smpar dmpar dm+sm</strong>. Setelah itu, tekan Enter. Abaikan saja terhadap respons seperti pada gambar ini.</p>
<img src="./Pictures/wrf-configure-arm.png" class="img-fluid" style="width:50.0%" alt="Respons program configure pada MacOS M1/M2 Docker"></li>
<li><p>Selanjutnya, jalankan program <code>compile</code> dengan perintah ini.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./compile</span> em_real <span class="at">-j</span> jumlah_prosesor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="instalasi-wrf-pre-processing-wps" class="level3" data-number="2.3.7">
<h3 data-number="2.3.7" class="anchored" data-anchor-id="instalasi-wrf-pre-processing-wps"><span class="header-section-number">2.3.7</span> Instalasi WRF Pre-Processing (WPS)</h3>
<p>Program WPS digunakan untuk menyesuaikan data masukan dari berbagai sumber (ERA5, GFS, NAM, …) sebelum ke simulasi WRF. Terdapat 3 program utama: <code>geogrid.exe</code>, <code>ungrib.exe</code>, dan <code>metgrid.exe</code>.</p>
<ul>
<li><code>geogrid.exe</code>: memilih lokasi yang akan dilakukan simulasi. Luaran program ini berupa file <code>geo_em*</code> yang berisi nilai-nilai dari variabel di dalam file hasil ekstrak geog_high_res_mandatory.tar</li>
<li><code>ungrib.exe</code>: mengubah file berformat <code>grib</code> menjadi <code>nc</code>, serta memungkinkan dapat melakukan interpolasi (waktu dan lokasi)</li>
<li><code>metgrid.exe</code>: menggabungkan luaran dari <code>geogrid.exe</code> dan <code>ungrib.exe</code> sehingga menghasilkan file <code>met_em*</code> sesuai dengan ketentuan lokasi dan waktu di dalam <code>namelist.wps</code></li>
</ul>
<p>Proses instalasi WPS tidak membutuhkan waktu yang lama, sekitar 2-5 menit. Untuk melakukan instalasi WPS, ikuti langkah-langkah berikut ini.</p>
<ol type="1">
<li><p>Saat ini, Anda berada di folder <code>WRF</code>. Buka folder <code>WPS</code> dengan perintah ini.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/WPS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Jalankan file <code>configure</code> dengan perintah ini.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Ketik angka <strong>3</strong> untuk GNU atau angka <strong>19</strong> untuk Intel.</p></li>
<li><p>Setelah selesai, di folder WPS akan muncul file <code>configure.wps</code>. Beberapa baris dari isi file tersebut ada yang perlu ditambahkan dan diganti dengan ketentuan ini.</p>
<ul>
<li>Untuk Intel, tambahkan <em>flags</em> <code>-liomp5</code> setelah <code>-lnetcdf</code> pada bagian variabel <code>WRF_LIB = ...</code>. Kemudian, ubah pula <code>DM_FC</code> dan <code>DM_CC</code> seperti pada <a href="#tbl-dm">Tabel&nbsp;<span>2.1</span></a>.</li>
<li>Untuk GNU, tambahkan <em>flags</em> <code>-lgomp</code> setelah <code>-lnetcdf</code> pada bagian variabel <code>WRF_LIB = ...</code>.</li>
</ul></li>
<li><p>Setelah diganti, lakukan kompilasi dengan mengetik perintah</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./compile</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<p>Proses instalasi berhasil apabila terdapat 3 file <code>.exe</code>: <code>geogrid.exe</code>, <code>ungrib.exe</code>, dan <code>metgrid.exe</code> di folder <code>WPS</code> yang berupa shortcut. Anda dapat menggunakan perintah</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="pp">*</span>.exe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>geogrid.exe  metgrid.exe  ungrib.exe</code></pre>
<p>Untuk pengguna <strong>MacOS M1/M2</strong> dengan <strong>Docker</strong>, ikuti langkah-langkah berikut.</p>
<ol type="1">
<li><p>Buka direktori <code>WPS</code> yang berada di dalam <code>$ODIR/WPS</code>.</p></li>
<li><p>Ubah file <code>arch/configure.defaults</code> menggunakan teks editor <code>nano</code> dengan menambahkan teks ini.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> arch/configure.defaults</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>########################################################################################################################
#ARCH Linux aarch64, Arm compiler OpenMPI # serial smpar dmpar dm+sm#
COMPRESSION_LIBS    = CONFIGURE_COMP_L
COMPRESSION_INC     = CONFIGURE_COMP_I
FDEFS               = CONFIGURE_FDEFS
SFC                 = gfortran
SCC                 = gcc
DM_FC               = mpif90
DM_CC               = mpicc
FC                  = CONFIGURE_FC
CC                  = CONFIGURE_CC
LD                  = $(FC)
FFLAGS              = -ffree-form -O -fconvert=big-endian -frecord-marker=4 -ffixed-line-length-0 -Wno-argument-mismatch -Wno-invalid-pch
F77FLAGS            = -ffixed-form -O -fconvert=big-endian -frecord-marker=4 -ffree-line-length-0 -Wno-argument-mismatch -Wno-invalid-pch
FCSUFFIX            =
FNGFLAGS            = $(FFLAGS)
LDFLAGS             =
CFLAGS              =
CPP                 = /usr/bin/cpp -P -traditional
CPPFLAGS            = -D_UNDERSCORE -DBYTESWAP -DLINUX -DIO_NETCDF -DBIT32 -DNO_SIGNAL CONFIGURE_MPI
RANLIB              = ranlib</code></pre></li>
<li><p>Jalankan program <code>configure</code> dengan perintah ini. Kemudian, pilih nomor 2. Tetap abaikan respons pada tulisan <code>./configure: 1: file: not found</code></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Kemudian, ubah isi file <code>configure.wps</code> dengan menambahkan <em>flags</em> <code>-lgomp</code> setelah <code>-lnetcdf</code> pada variabel <code>WRF_LIB = ...</code>.</p></li>
<li><p>Selanjutnya, jalankan program <code>compile</code> dengan perintah ini.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./compile</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
</section>
<section id="menjalankan-simulasi-wrf-arw" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="menjalankan-simulasi-wrf-arw"><span class="header-section-number">2.4</span> Menjalankan Simulasi WRF-ARW</h2>
<p>Anda dapat melanjutkan ke tahapan ini apabila seluruh program telah berhasil terpasang. Bagi Anda yang belum berhasil, sabar :D dan ulangi kembali langkah-langkah di atas. Secara umum, diagram pada <a href="#fig-wrfdiagram">Gambar&nbsp;<span>2.9</span></a> menunjukkan proses menjalankan WRF dari tahapan memasukkan data hingga plot dan analisis akhir. Seperti yang telah dijelaskan pada subbab sebelumnya bahwa langkah awal dalam menjalankan WRF adalah menjalankan WPS terlebih dahulu. Anda perlu menyiapkan data masukan atmosfer maupun permukaan (data statik). Program <code>geogrid.exe</code> dijalankan pertama, kemudian diikuti dengan <code>ungrib.exe</code> dan terakhir <code>metgrid.exe</code>. Selanjutnya, Anda dapat melangkah ke program WRF, yaitu <code>real.exe</code> dan <code>wrf.exe</code>. Program <code>real.exe</code> digunakan sebagai pendefinisian kondisi awal dan kondisi batas berdasarkan informasi dari <code>namelist.input</code> yang berada dalam folder <code>test/em_real/</code>. Kemudian, Anda dapat menggunakan perangkat lunak apapun (mis. NCAR Command Language (NCL), GrADS, R, Python, Julia, Matlab, ArcMAP, atau QGIS) untuk menganalisis serta visualisasi luaran WRF.</p>
<p>Untuk data masukan, Anda juga dapat menggunakan data observasi, tetapi harus berupa grid. Namun, ini merupakan program yang berbeda dari WRF-ARW, yaitu WRFDA (WRF Data Assimilation). Selain itu, terdapat pula data masukan dari emisi kimia, seperti emisi biogenik dan atropogenik. Akan tetapi, program ini merupakan turunan WRF-ARW, yaitu WRF-Chem. Penjelasan mengenai WRFDA dan WRF-Chem tidak disampaikan di dalam praktikum ini.</p>
<div id="fig-wrfdiagram" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Pictures/WRFDiagram.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.9: Diagram WRF</figcaption>
</figure>
</div>
<p>Jika Anda menutup terminal bash atau mematikan laptop/komputer, definisikan kembali <em>ENVIRONMENT VARIABLE</em> seperti pada saat proses memasang WRF dan WPS. Variabel yang perlu didefinisikan hanya 3 saja seperti pada perintah di bawah ini. Anda dapat memasukkan variabel ini pada file <code>.bashrc</code> atau <code>.bash_profile</code> di direktori <code>$HOME</code>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">ODIR</span><span class="op">=</span><span class="va">$HOME</span>/WRF-Model</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="va">$ODIR</span>/bin:<span class="va">$PATH</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">LD_LIBRARY_PATH</span><span class="op">=</span><span class="va">$ODIR</span>/lib:<span class="va">$LD_LIBRARY_PATH</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Bagi pengguna Compiler <strong>Intel</strong>, Anda perlu menambahkan perintah di bawah ini. Perintah ini diperlukan pada saat menjalankan WRF.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="bu">ulimit</span> <span class="at">-s</span> unlimited</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="program-wps" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="program-wps"><span class="header-section-number">2.4.1</span> Program WPS</h3>
<p>Untuk lebih mudah dalam memahami alur proses simulasi WRF pada modul ini, lokasi/domain yang dipilih untuk adalah Kota Surabaya dengan periode 1-3 Januari 2022 dengan data GFS dan ERA5. Interval waktu dari kedua data tersebut adalah 6 jam, yaitu pukul 00:00, 06:00, 12:00, dan 18:00 waktu Zulu (UTC+0). Langkah awal sebelum menjalankan WRF adalah menentukan lokasi dan waktu terlebih dahulu di dalam program WPS. Seperti yang telah dijelaskan sebelumnya, WPS memiliki 3 program utama: <code>geogrid.exe</code>, <code>ungrib.exe</code>, dan <code>metgrid.exe</code>.</p>
<p>Sesuai dengan kelanjutan dari subbab sebelumnya mengenai instalasi WRF, Anda saat ini berada di dalam folder <code>WPS/</code>. Jika lupa, Anda bisa mengetikkan kembali perintah ini.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/WPS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Langkah-langkah menjalankan program WPS adalah sebagai berikut.</p>
<section id="penentuan-lokasi-dan-waktu-simulasi" class="level4" data-number="2.4.1.1">
<h4 data-number="2.4.1.1" class="anchored" data-anchor-id="penentuan-lokasi-dan-waktu-simulasi"><span class="header-section-number">2.4.1.1</span> Penentuan Lokasi dan Waktu Simulasi</h4>
<p>Isi dari file <code>namelist.wps</code> pada saat awal instalasi seperti ini.</p>
<pre><code>&amp;share
 wrf_core = 'ARW',
 max_dom = 2,
 start_date = '2019-09-04_12:00:00','2019-09-04_12:00:00',
 end_date   = '2019-09-06_00:00:00','2019-09-04_12:00:00',
 interval_seconds = 10800
/

&amp;geogrid
 parent_id         =   1,    1,
 parent_grid_ratio =   1,    3,
 i_parent_start    =   1,   53,
 j_parent_start    =   1,   25,
 e_we              =  150, 220,
 e_sn              =  130, 214,
 geog_data_res = 'default','default',
 dx = 15000,
 dy = 15000,
 map_proj = 'lambert',
 ref_lat   =  33.00,
 ref_lon   = -79.00,
 truelat1  =  30.0,
 truelat2  =  60.0,
 stand_lon = -79.0,
 geog_data_path = '/glade/work/wrfhelp/WPS_GEOG/'
/

&amp;ungrib
 out_format = 'WPS',
 prefix = 'FILE',
/

&amp;metgrid
 fg_name = 'FILE'
/</code></pre>
<p>Terdapat berbagai macam parameter di dalam <code>&amp;share</code>, <code>&amp;geogrid</code>, <code>&amp;ungrib</code>, dan <code>&amp;metgrid</code>. Anda perlu mengubah beberapa parameter tersebut yang dapat disesuaikan dengan simulasi. Tapi, Anda harus memperhatikan aturan atau template yang telah diberikan di dalam panduan pengguna. Untuk lebih rincinya, Anda bisa lihat di <a href="https://www2.mmm.ucar.edu/wrf/users/docs/user_guide_v4/v4.4/users_guide_chap3.html">Panduan Pengguna WRF-ARW Bab 3</a>. Di dalam tahapan ini, Anda perlu mengubah parameter-parameter yang ada di dalam <code>&amp;geogrid</code>. Pada contoh yang telah kami berikan, Anda perlu mengganti parameter pada bagian <code>&amp;share</code> dan <code>&amp;geogrid</code> di dalam file <code>namelist.wps</code>. Anda dapat menggunakan teks editor <code>nano</code>.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> namelist.wps</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>File yang telah berubah menjadi seperti di bawah ini.</p>
<pre><code>&amp;share
 wrf_core = 'ARW',                                                                 
 max_dom = 3,
 start_year  = 2022, 2022, 2022,
 start_month =   01,   01,   01,
 start_day   =   01,   01,   01,
 start_hour  =   00,   00,   00,
 end_year    = 2022, 2022, 2022,
 end_month   =   01,   01,   01,
 end_day     =   03,   03,   03,
 end_hour    =   18,   18,   18,
 interval_seconds = 21600,                                                         
 io_form_geogrid = 2,                                                              
/

&amp;geogrid
 parent_id         =   1,   1,   1,
 parent_grid_ratio =   1,   3,   9,                                                  
 i_parent_start    =   1,  11,  15,
 j_parent_start    =   1,  11,  15,
 e_we              =  33,  40,  46,                                                 
 e_sn              =  33,  40,  46,                                                 
 geog_data_res = 'default','default','default',                                     
 dx = 18000,                                                                        
 dy = 18000,                                                                        
 map_proj = 'mercator',                                                             
 ref_lat   =  -7.328,                                                   
 ref_lon   = 112.741,                                                     
 truelat1  =  -7.328,                                                   
 geog_data_path = '/home/absen/WRF-Model/data/WPS_GEOG/'                                 
/

&amp;ungrib
 out_format = 'WPS',
 prefix = 'FILE',
/

&amp;metgrid
 fg_name = 'FILE'
 io_form_metgrid = 2, 
/</code></pre>
<p>Penjelasan setiap variabel dapat dilihat pada <a href="#tbl-namelistwps">Tabel&nbsp;<span>2.2</span></a>.</p>
<div id="tbl-namelistwps" class="anchored">
<table class="table">
<caption>Tabel&nbsp;2.2: Informasi beberapa variabel di dalam <code>namelist.wps</code></caption>
<colgroup>
<col style="width: 11%">
<col style="width: 88%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variabel</th>
<th style="text-align: left;">Keterangan</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>wrf_core</code></td>
<td style="text-align: left;">Tipe penyelesaian WRF, ARW atau NMM</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>max_dom</code></td>
<td style="text-align: left;">Jumlah domain, semakin banyak domain maka semakin tinggi resolusi spasialnya</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>start_date</code></td>
<td style="text-align: left;">Waktu mulai simulasi sesuai dengan data masukan. Format: <code>YYYY-MM-DD_HH:mm:ss</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>end_date</code></td>
<td style="text-align: left;">Waktu akhir simulasi sesuai dengan data masukan. Format: <code>YYYY-MM-DD_HH:mm:ss</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>interval_seconds</code></td>
<td style="text-align: left;">Interval waktu dari data masukan (dalam detik)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>io_from_geogrid</code></td>
<td style="text-align: left;">Tipe format file luaran <code>geogrid.exe</code> (1 = binary, 2 = netcdf, 3 = GRIB1)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>parent_id</code></td>
<td style="text-align: left;">Untuk domain paling kasar, nilainya 1. Domain selanjutnya juga bernilai 1 yang menandakan bahwa subdomain merupakan bagian dari domain utamanya</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>parent_grid_ratio</code></td>
<td style="text-align: left;">Rasio piksel dari dx dan dy pada domain ke-1. Domain paling kasar adalah 1 dan selanjutnya mengikuti rasio yang diinginkan.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>i_parent_start</code></td>
<td style="text-align: left;">Nomor indeks acuan untuk koordinat X. Domain paling kasar bernilai 1, ditentukan dari kiri-bawah</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>j_parent_start</code></td>
<td style="text-align: left;">Nomor indeks acuan untuk koordinat Y. Domain paling kasar bernilai 1, ditentukan dari kiri-bawah</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>e_we</code></td>
<td style="text-align: left;">Jumlah grid/piksel dari barat ke timur mengikuti rumus <code>parent_grid_ratio</code> * N + 1, dengan <span class="math inline">\(N &gt; 0\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>e_sn</code></td>
<td style="text-align: left;">Jumlah grid/piksel dari selatan ke utara mengikuti rumus <code>parent_grid_ratio</code> * N + 1, dengan <span class="math inline">\(N &gt; 0\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>geog_data_res</code></td>
<td style="text-align: left;">Pemilihan resolusi spasial dari data statik</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>dx</code></td>
<td style="text-align: left;">Resolusi spasial pada koordinat X (dalam meter)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>dy</code></td>
<td style="text-align: left;">Resolusi spasial pada koordinat Y (dalam meter)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>map_proj</code></td>
<td style="text-align: left;">Sistem proyeksi peta (<code>mercator</code>, <code>lambert</code>, <code>polar</code>, <code>lat-lon</code>). Untuk simulasi di sekitar khatulistiwa, direkomendasikan menggunakan <code>mercator</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>ref_lat</code></td>
<td style="text-align: left;">Koordinat lintang titik tengah acuan dari domain paling kasar</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>ref_lon</code></td>
<td style="text-align: left;">Koordinat bujur titik tengah acuan dari domain paling kasar</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>truelat1</code></td>
<td style="text-align: left;">Koordinat lintang sebenarnya. Dibutuhkan untuk sistem proyeksi <code>mercator</code>, <code>polar</code>, dan <code>lambert</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>geog_data_path</code></td>
<td style="text-align: left;">Lokasi folder <code>WPS_GEOG</code></td>
</tr>
</tbody>
</table>
</div>
<p>Pada parameter <code>start_date</code> dan <code>end_date</code>, Anda bisa menggunakan parameter lain dengan membagi masing-masing format tahun (<code>start_year</code>; <code>end_year</code>), bulan (<code>start_month</code>; <code>end_month</code>), tanggal (<code>start_day</code>; <code>end_day</code>), dan jam (<code>start_hour</code>; <code>end_hour</code>).</p>
<p>Berkaitan dengan skala resolusi spasial pada simulasi yang akan dijalankan dengan pemilihan lokasi di Kota Surabaya, skala tertingginya adalah 2 km. Anda perhatikan parameter <code>parent_grid_ratio</code>. Nilai 1, 3, dan 9 secara berturut-turut merupakan rasio terhadap <code>dx</code> atau <code>dy</code> untuk setiap domain. Nilai 1 berarti untuk domain terluar dengan skala <span class="math inline">\(1 / 1 * 18000 = 18000\)</span> meter, sedangkan nilai 3 untuk domain ke-2 dengan skala <span class="math inline">\(1 / 3 * 18000 = 6000\)</span> meter.</p>
<p>Pada bagian <code>&amp;geogrid</code>, penentuan lokasi kajian ini cukup rumit. Anda bisa menggunakan halaman Github <a href="https://jiririchter.github.io/WRFDomainWizard">https://jiririchter.github.io/WRFDomainWizard</a> untuk membuat file <code>namelist.wps</code> sesuai dengan lokasi yang Anda inginkan, setidaknya Anda dapat menyalin teks pada bagian <code>&amp;geogrid</code> <a href="#fig-wrfdomainwizard">Gambar&nbsp;<span>2.10</span></a>.</p>
<div id="fig-wrfdomainwizard" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Pictures/WRFDomainWizard.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.10: WRF Domain Wizard oleh <a href="https://jiririchter.github.io/WRFDomainWizard">Jiririchter</a></figcaption>
</figure>
</div>
<p>Untuk memverifikasi kesesuaian pemilihan lokasi yang telah dibuat, Anda dapat menggunakan skrip <code>plotgrids_new.ncl</code> di dalam folder <code>util/</code>. Bukalah file tersebut. Cari dan ubahlah variabel <code>type = x11</code> menjadi <code>type = png</code> untuk mengatur luaran file dalam bentuk gambar (format <code>.png</code>). Untuk menjalankan skrip ini, aktifkan terlebih dahulu <em>environment</em> <code>ncl</code> dengan perintah <code>source activate ncl</code> atau <code>conda activate ncl</code>. Kemudian, jalankan perintah berikut ini. File <code>.png</code> akan muncul di dalam folder <code>WPS/</code> dengan nama <strong>wps_show_dom.png</strong>. Hasilnya seperti <a href="#fig-wpsconfigpic">Gambar&nbsp;<span>2.11</span></a></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$HOME</span>/WRF-Model/WPS</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ncl</span> util/plotgrids_new.ncl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-wpsconfigpic" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Pictures/wps_show_dom.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.11: Konfigurasi domain WRF</figcaption>
</figure>
</div>
</section>
<section id="menjalankan-program-geogrid.exe" class="level4" data-number="2.4.1.2">
<h4 data-number="2.4.1.2" class="anchored" data-anchor-id="menjalankan-program-geogrid.exe"><span class="header-section-number">2.4.1.2</span> Menjalankan Program <code>geogrid.exe</code></h4>
<p>Selanjutnya, Anda dapat menjalankan program <code>geogrid.exe</code> dengan perintah di bawah ini. Hasilnya, terdapat 3 file dengan nama geo_em.d0x.nc (dengan x = nomor domain; 1, 2, 3) karena pengaturan <code>max_dom = 3</code>.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./geogrid.exe</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> geo_em<span class="pp">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>geo_em.d01.nc  geo_em.d02.nc  geo_em.d03.nc</code></pre>
</section>
<section id="menyambungkan-file-data-masukan-dan-tabel-variabel" class="level4" data-number="2.4.1.3">
<h4 data-number="2.4.1.3" class="anchored" data-anchor-id="menyambungkan-file-data-masukan-dan-tabel-variabel"><span class="header-section-number">2.4.1.3</span> Menyambungkan File Data Masukan dan Tabel Variabel</h4>
<p>WPS menyediakan program <code>link_grib.csh</code> untuk menyambungkan file data masukan ke dalam folder <code>WPS/</code> dengan membuat shortcut yang bernama <code>GRIBFILE.*</code> (<code>GRIBFILE.AAA</code>, <code>GRIBFILE.AAB</code>, …). Perintahnya sebagai berikut.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./link_grib.csh</span> <span class="va">$ODIR</span>/data/GFS/<span class="pp">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Kemudian, buatlah shortcut dengan nama Vtable di dalam folder <code>WPS/</code> dari file yang berada di dalam folder <code>ungrib/Variable_Tables</code>. Untuk data GFS, nama file tersebut adalah <code>Vtable.GFS</code>, sedangkan ERA5 adalah <code>Vtable.ERA-Interim.pl</code>. Perintahnya sebagai berikut.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-sf</span> ungrib/Variable_Tables/Vtable.GFS Vtable <span class="co"># GFS</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-sf</span> ungrib/Variable_Tables/Vtable.ERA-Interim.pl Vtable <span class="co"># ERA5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="menjalankan-program-ungrib.exe" class="level4" data-number="2.4.1.4">
<h4 data-number="2.4.1.4" class="anchored" data-anchor-id="menjalankan-program-ungrib.exe"><span class="header-section-number">2.4.1.4</span> Menjalankan Program <code>ungrib.exe</code></h4>
<p>Setelah menyambungkan data masukan serta tabel variabel, jalankan program <code>ungrib.exe</code> dengan perintah berikut.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./ungrib.exe</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Luaran dari program ini adalah file dengan nama <code>FILE:*</code> yang memiliki format <code>.nc</code> (netcdf).</p>
</section>
<section id="menjalankan-program-metgrid.exe" class="level4" data-number="2.4.1.5">
<h4 data-number="2.4.1.5" class="anchored" data-anchor-id="menjalankan-program-metgrid.exe"><span class="header-section-number">2.4.1.5</span> Menjalankan Program <code>metgrid.exe</code></h4>
<p>Jalankan program <code>metgrid.exe</code> dengan perintah berikut.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./metgrid.exe</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Luaran dari program ini adalah file dengan nama <code>met_em*</code> yang memiliki format <code>.nc</code>. File-file ini nanti yang akan dipindahkan menuju folder <code>WRF/test/em_real</code> atau Anda dapat juga membuat shortcut. Perintahnya sebagai berikut.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> met_em<span class="pp">*</span> <span class="va">$ODIR</span>/WRF/test/em_real <span class="co"># memindahkan semua file met_em* ke folder WRF/test/em_real</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co"># atau</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-sf</span> met_em<span class="pp">*</span> <span class="va">$ODIR</span>/WRF/test/em_real <span class="co"># membuat shortcut di folder WRF/test/em_real</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="program-wrf" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="program-wrf"><span class="header-section-number">2.4.2</span> Program WRF</h3>
<p>Pada bagian ini, program WRF yang digunakan hanya 2: <code>real.exe</code> dan <code>wrf.exe</code>. Sebelum itu, Anda diharuskan mengubah beberapa parameter pada file <code>namelist.input</code> seperti di dalam file <code>namelist.wps</code>. Parameter di dalam <code>namelist.input</code> sangat banyak karena terdapat bagian pemilihan lokasi dan waktu (disesuaikan dengan <code>namelist.wps</code>), pemilihan skema parameter fisik, dan parameter dinamik. Kami hanya memberikan beberapa parameter yang diperlukan untuk contoh simulasi. Anda dapat membaca lebih lanjut di <a href="https://www2.mmm.ucar.edu/wrf/users/docs/user_guide_v4/v4.4/users_guide_chap5.html">Panduan Pengguna WRF Bab 5</a>.</p>
<section id="mengubah-isi-namelist.input" class="level4" data-number="2.4.2.1">
<h4 data-number="2.4.2.1" class="anchored" data-anchor-id="mengubah-isi-namelist.input"><span class="header-section-number">2.4.2.1</span> Mengubah isi <code>namelist.input</code></h4>
<p>Saat ini Anda masih berada di folder <code>WPS/</code>. Buka terlebih dahulu folder <code>em_real</code> dengan perintah</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$ODIR</span>/WRF/test/em_real</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Di dalam folder <code>em_real</code>, terdapat 4 program, yaitu <code>real.exe</code>, <code>ndown.exe</code>, <code>tc.exe</code>, dan <code>wrf.exe</code>. Nilai <code>max_dom</code> pada <code>namelist.wps</code> adalah 3. Jika pemilihan lokasi Anda memiliki &gt;1 domain, WRF akan memproses simulasi sampai pada domain tertinggi atau disebut dengan <strong><em>nesting</em></strong>. Proses ini juga dibagi lagi menjadi 2, yaitu <em>nesting</em> dua arah dan satu arah. Untuk <em>nesting</em> satu arah, program yang digunakan bisa atau tanpa dengan program <code>ndown.exe</code>. Penggunaan <em>nesting</em> satu arah biasanya pengguna hanya tertarik pada analisis domain tertinggi. Penggunaan <code>ndown.exe</code> juga sering digunakan pada turunan WRF, yaitu WRF-Chem. Untuk <em>nesting</em> dua arah, proses-proses perhitungan fisis pada domain tertinggi akan dikembalikan (<em>feedback</em>) ke domain terendah sehingga proses analisis dapat dilakukan pada semua domain. Anda dapat membaca lebih lanjut mengenai <em>nesting</em> di <a href="https://ruc.noaa.gov/wrf/wrf-chem/wrf_tutorial_2012_brazil/WRF_nesting.pdf">https://ruc.noaa.gov/wrf/wrf-chem/wrf_tutorial_2012_brazil/WRF_nesting.pdf</a>.</p>
<p>Bukalah file <code>namelist.input</code> dengan cara sama seperti Anda membuka <code>namelist.wps</code>. Ketika pertama kali dibuka, file <code>namelist.input</code> seperti di bawah ini. Anda juga dapat melihat beberapa contoh/template lain (mis. <code>namelist.input.4km</code>, <code>namelist.input.chem</code>, <code>namelist.input.volc</code>, …) sesuai dengan kebutuhan tertentu.</p>
<pre><code> &amp;time_control
 run_days                            = 0,
 run_hours                           = 36,
 run_minutes                         = 0,
 run_seconds                         = 0,
 start_year                          = 2019, 2019,
 start_month                         = 09,   09, 
 start_day                           = 04,   04,
 start_hour                          = 12,   12,
 end_year                            = 2019, 2019,
 end_month                           = 09,   09,
 end_day                             = 06,   06,
 end_hour                            = 00,   00,
 interval_seconds                    = 10800
 input_from_file                     = .true.,.true.,
 history_interval                    = 60,  60,
 frames_per_outfile                  = 1, 1,
 restart                             = .false.,
 restart_interval                    = 7200,
 io_form_history                     = 2
 io_form_restart                     = 2
 io_form_input                       = 2
 io_form_boundary                    = 2
 /

 &amp;domains
 time_step                           = 90,
 time_step_fract_num                 = 0,
 time_step_fract_den                 = 1,
 max_dom                             = 2,
 e_we                                = 150,    220,
 e_sn                                = 130,    214,
 e_vert                              = 45,     45,
 dzstretch_s                         = 1.1
 p_top_requested                     = 5000,
 num_metgrid_levels                  = 34,
 num_metgrid_soil_levels             = 4,
 dx                                  = 15000,
 dy                                  = 15000,
 grid_id                             = 1,     2,
 parent_id                           = 0,     1,
 i_parent_start                      = 1,     53,
 j_parent_start                      = 1,     25,
 parent_grid_ratio                   = 1,     3,
 parent_time_step_ratio              = 1,     3,
 feedback                            = 1,
 smooth_option                       = 0
 /

 &amp;physics
 physics_suite                       = 'CONUS'
 mp_physics                          = -1,    -1,
 cu_physics                          = -1,    -1,
 ra_lw_physics                       = -1,    -1,
 ra_sw_physics                       = -1,    -1,
 bl_pbl_physics                      = -1,    -1,
 sf_sfclay_physics                   = -1,    -1,
 sf_surface_physics                  = -1,    -1,
 radt                                = 15,    15,
 bldt                                = 0,     0,
 cudt                                = 0,     0,
 icloud                              = 1,
 num_land_cat                        = 21,
 sf_urban_physics                    = 0,     0,
 fractional_seaice                   = 1,
 /

 &amp;fdda
 /

 &amp;dynamics
 hybrid_opt                          = 2, 
 w_damping                           = 0,
 diff_opt                            = 2,      2,
 km_opt                              = 4,      4,
 diff_6th_opt                        = 0,      0,
 diff_6th_factor                     = 0.12,   0.12,
 base_temp                           = 290.
 damp_opt                            = 3,
 zdamp                               = 5000.,  5000.,
 dampcoef                            = 0.2,    0.2,
 khdif                               = 0,      0,
 kvdif                               = 0,      0,
 non_hydrostatic                     = .true., .true.,
 moist_adv_opt                       = 1,      1,
 scalar_adv_opt                      = 1,      1,
 gwd_opt                             = 1,      0,
 /

 &amp;bdy_control
 spec_bdy_width                      = 5,
 specified                           = .true.
 /

 &amp;grib2
 /

 &amp;namelist_quilt
 nio_tasks_per_group = 0,
 nio_groups = 1,
 /</code></pre>
<p>Pada file ini, samakan beberapa parameter seperti di file <code>namelist.wps</code>. Perhatikan <a href="#tbl-namelistinputchange">Tabel&nbsp;<span>2.3</span></a>. Anda cukup mencari parameter yang sama antara <code>namelist.wps</code> dengan <code>namelist.input</code>, tetapi tidak semuanya ada di dalam <code>namelist.input</code>. Untuk parameter lainnya, seperti <code>parent_time_step_ratio</code>, <code>time_step</code>, <code>history_interval</code>, <code>frame_per_outfile</code>, dan seterusnya, Anda dapat membacanya lebih banyak di <a href="https://www2.mmm.ucar.edu/wrf/users/docs/user_guide_v4/v4.4/users_guide_chap5.html">Panduan Pengguna WRF Bab 5</a> atau bisa dilihat pada file <code>README.namelist</code> di dalam folder <code>test/em_real</code> untuk setiap penjelasan singkat berbagai parameter.</p>
<p>Bagian <code>&amp;time_control</code> berfungsi sebagai pengaturan waktu simulasi serta luaran yang akan dihasilkan. Sebagai informasi, file luaran WRF berformat NetCDF (<code>.nc</code>) dengan nama<br>
<code>wrfout_&lt;domain&gt;_&lt;yyyy&gt;-&lt;mm&gt;-&lt;dd&gt;_&lt;HH&gt;:&lt;MM&gt;:&lt;SS&gt;</code>, dimana</p>
<ul>
<li>domain: identitas domain (d01, d02, …)</li>
<li>yyyy: tahun, dengan format 4 digit</li>
<li>mm: bulan, dengan format 2 digit</li>
<li>dd: tanggal, dengan format 2 digit</li>
<li>HH: jam, dengan format 2 digit</li>
<li>MM: menit, dengan format 2 digit</li>
<li>SS: detik, dengan format 2 digit</li>
</ul>
<p>Pada parameter <code>run_days</code>, <code>run_hours</code>, <code>run_minutes</code>, dan <code>run_seconds</code>, ini dapat dihitung dari selisih waktu akhir simulasi dengan awal simulasi. Pada simulasi yang akan dicoba dalam modul ini, yaitu 1 Januari 2022 pukul 00:00 UTC hingga 3 Januari 2022 18:00 UTC, nilai dari <code>run_days</code> dan <code>run_hours</code> secara berturut-turut adalah 2 dan 18. Anda juga dapat mengatur <code>run_days</code> ini menjadi 0 setelah dikonversi menjadi jam (2 hari = 48 jam) dan tambahkan ke <code>run_hours</code>, yaitu menjadi 66. Parameter <code>history_interval</code> digunakan untuk meletakkan nilai pada file luaran WRF dalam format <code>.nc</code> dengan waktu tertentu (dalam menit). Misalkan diatur ke 60, berarti hasil perhitungan dari berbagai algoritma WRF dimasukkan ke file setiap 60 menit sekali. Anda bebas mengatur angka pada parameter ini. Dampaknya, ukuran file akan semakin besar jika Anda mengatur nilainya kecil. Tentu ini tidak akan menjadi masalah apabila ruang kosong penyimpanan internal/eksternal Anda masih banyak. Banyaknya file luaran dapat pula diatur jumlahnya, yaitu di dalam parameter <code>frames_per_outfile</code>. Jika parameter diatur pada <code>frames_per_outfile = 1</code>, <code>history_interval = 60</code>, dan <code>run_hours = 66</code>, berarti file luaran yang akan dibuat dan disimpan ke dalam penyimpanan adalah sebanyak 66 file. Agar lebih efektif saat akan melakukan analisis, kami menyarankan untuk mengatur <code>frames_per_outfile = 1000</code>.</p>
<p>Kemudian untuk bagian <code>&amp;domains</code>, digunakan untuk mengatur kondisi dari domain agar dapat sesuai dengan data masukan (banyak grid horizontal dan vertikal, posisi, rasio grid, tipe interpolasi). Pada parameter <code>feedback</code>, Anda dapat mengatur tipe <em>nesting</em> dua arah (<code>1</code>) atau satu arah (<code>0</code>). Parameter <code>num_metgrid_levels</code> dan <code>num_metgrid_soil_levels</code> harus diatur sesuai dengan yang ada di dalam salah satu file <code>met_em*</code>. Untuk melihatnya, gunakan perintah di bawah ini. Nilai kedua parameter <code>num_metgrid_levels</code> dapat berbeda sesuai dengan data masukan yang digunakan. Sebagai contoh, GFS memiliki <code>num_metgrid_levels = 34</code>, sedangkan ERA5 <code>num_metgrid_levels = 38</code>.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ncdump</span> <span class="at">-h</span> met_em.d01.2022-01-01_00:00:00.nc <span class="kw">|</span> <span class="fu">grep</span> num_metgrid_levels      <span class="co"># = 34</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ncdump</span> <span class="at">-h</span> met_em.d01.2022-01-01_00:00:00.nc <span class="kw">|</span> <span class="fu">grep</span> NUM_METGRID_SOIL_LEVELS <span class="co"># = 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Di dalam bagian <code>&amp;physics</code>, terdapat berbagai skema parameterisasi dalam penyelesaian perhitungan pembentukan awan, skemar radiasi, lapisan perbatas, serta proses-proses di permukaan tanah. Pada parameter <code>physics_suite</code>, Anda bisa mengaturnya ke <code>TROPICAL</code> karena wilayah yang ingin disimulasikan berada di daerah tropis. Hanya saja, opsi default untuk skema parameterisasi belum tentu menghasilkan luaran yang bagus sesuai dengan kondisi sebenarnya di daerah tropis. Anda perlu mengkaji dari beberapa publikasi nasional maupun internasional dalam memilih skema parameterisasi, khususnya di wilayah Indonesia. Ketika Anda mendefinisikan <code>physics_suite = 'TROPICAL'</code>, Anda tidak perlu lagi menambahkan angka pada parameter di bawah ini.</p>
<ul>
<li><code>mp_physics         =  6</code>: WSM6</li>
<li><code>cu_physics         = 16</code>: New-Tiedke</li>
<li><code>ra_lw_physics      =  4</code>: Rapid Radiative Model Transformation for GCM (RRTMG)</li>
<li><code>ra_sw_physics      =  4</code>: Rapid Radiative Model Transformation for GCM (RRTMG)</li>
<li><code>bl_pbl_physics     =  1</code>: Yonsei University</li>
<li><code>sf_sfclay_physics  = 91</code>: MM5 Monin-Obukhov</li>
<li><code>sf_surface_physics =  2</code>: Noah Land Surface Model</li>
</ul>
<p>Anda hanya perlu menambahkan nilai <code>-1</code> pada parameter-parameter tersebut, tentu saja sesuai dengan banyaknya domain. Anda juga dapat menghilangkan parameter <code>physics_suite</code> dan mengganti parameter <code>mp_physics</code>, <code>cu_physics</code>, <code>sf_surface_physics</code>, <code>sf_sfclay_physics</code>, <code>ra_lw_physics</code>, <code>ra_sw_physics</code>, dan <code>bl_pbl_physics</code> ke opsi lain yang ada di dalam <a href="https://www2.mmm.ucar.edu/wrf/users/docs/user_guide_v4/v4.4/users_guide_chap5.html">Panduan Pengguna WRF Bab 5</a>. Anda harus berhati-hati dan memperhatikan pemilihan skema parameterisasi karena terdapat parameter yang harus ditambahkan di dalam bagian <code>&amp;physics</code>, menambahkan bagian lain, atau kombinasi antar skema. Sebagai contoh untuk <code>sf_surface_physics = 4</code> (<em>Noah-MP Land Surface Model</em>), perlu menambahkan bagian <code>&amp;noah_mp</code>; Ketika <code>cu_physics = 14</code> (<em>Scale-aware SAS</em>), perlu menambahkan parameter <code>shcu_physics = 4</code>; Parameter <code>bl_pbl_physics = 2</code> (Mellor-Yamada-Janjic, MYJ) nilai dari parameter <code>sf_sfclay_physics = 2</code> (<em>Eta Model</em>). Untuk pengaturan nilai-nilai di dalam <code>&amp;physics</code>, Anda harus menambahkannya sebanyak jumlah domain. Anda juga dapat menonaktifkan skema parameterisasi tertentu dengan mengubahnya ke <code>0</code>, misalnya pada <code>cu_physics</code> untuk domain &lt;10 km (domain 2 dan 3).</p>
<div id="tbl-namelistinputchange" class="anchored">
<table class="table">
<caption>Tabel&nbsp;2.3: Informasi sebagian variabel di dalam <code>namelist.input</code> yang perlu disesuaikan dengan <code>namelist.wps</code></caption>
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Parameter di <code>namelist.wps</code></th>
<th style="text-align: left;">Parameter di <code>namelist.input</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>start_year = 2022, 2022, 2022,</code></td>
<td style="text-align: left;"><code>start_year = 2022, 2022, 2022,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>start_month = 01, 01, 01,</code></td>
<td style="text-align: left;"><code>start_month = 01, 01, 01,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>start_day = 01, 01, 01,</code></td>
<td style="text-align: left;"><code>start_day = 01, 01, 01,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>start_hour = 00, 00, 00,</code></td>
<td style="text-align: left;"><code>start_hour = 00, 00, 00,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>end_year = 2022, 2022, 2022,</code></td>
<td style="text-align: left;"><code>end_year = 2022, 2022, 2022,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>end_month = 01, 01, 01,</code></td>
<td style="text-align: left;"><code>end_month = 01, 01, 01,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>end_day = 03, 03, 03,</code></td>
<td style="text-align: left;"><code>end_day = 03, 03, 03,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>end_hour = 18, 18, 18,</code></td>
<td style="text-align: left;"><code>end_hour = 18, 18, 18,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">-</td>
<td style="text-align: left;"><code>run_days = 2,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">-</td>
<td style="text-align: left;"><code>run_hour = 18,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>max_dom = 3,</code></td>
<td style="text-align: left;"><code>max_dom = 3,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>interval_seconds = 21600,</code></td>
<td style="text-align: left;"><code>interval_seconds = 21600,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>parent_id = 1, 1, 1,</code></td>
<td style="text-align: left;"><code>parent_id = 1, 1, 1,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>parent_grid_ratio =   1,   3,   9,</code></td>
<td style="text-align: left;"><code>parent_grid_ratio =   1,   3,   9,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>dx = 15000,</code></td>
<td style="text-align: left;"><code>dx = 15000,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>dy = 15000,</code></td>
<td style="text-align: left;"><code>dy = 15000,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>i_parent_start = 1,  11,  15,</code></td>
<td style="text-align: left;"><code>i_parent_start = 1,  11,  15,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>j_parent_start = 1,  11,  15,</code></td>
<td style="text-align: left;"><code>j_parent_start = 1,  11,  15,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>e_we =  33,  40,  46,</code></td>
<td style="text-align: left;"><code>e_we =  33,  40,  46,</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>e_sn =  33,  40,  46,</code></td>
<td style="text-align: left;"><code>e_sn =  33,  40,  46,</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">-</td>
<td style="text-align: left;"><code>parent_time_step_ratio = 1,   3,   9,</code> (sama dengan <code>parent_grid_ratio</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;">-</td>
<td style="text-align: left;"><code>time_step = 90</code>, dengan rumus <span class="math inline">\(6 * dx\)</span> (dalam km)</td>
</tr>
</tbody>
</table>
</div>
<p>Isi file <code>namelist.input</code> yang telah diubah sepenuhnya menjadi seperti ini.</p>
<pre><code>&amp;time_control
 run_days                            = 2,
 run_hours                           = 18,
 run_minutes                         = 0,
 run_seconds                         = 0,
 start_year                          = 2022, 2022, 2022,
 start_month                         = 01,   01,  01,
 start_day                           = 01,   01,  01,
 start_hour                          = 00,   00,  00,
 end_year                            = 2022, 2022, 2022,
 end_month                           = 01,   01,  01, 
 end_day                             = 03,   03,  03,
 end_hour                            = 18,   18,  18,
 interval_seconds                    = 21600,
 input_from_file                     = .true.,.true.,.true.,
 history_interval                    = 60,  60, 60,
 frames_per_outfile                  = 1000, 1000, 1000,
 restart                             = .false.,
 restart_interval                    = 7200,
 io_form_history                     = 2
 io_form_restart                     = 2
 io_form_input                       = 2
 io_form_boundary                    = 2
 /

 &amp;domains
 time_step                           = 90,
 time_step_fract_num                 = 0,
 time_step_fract_den                 = 1,
 max_dom                             = 3,
 e_we                                = 33,    40,  46,
 e_sn                                = 33,    40,  46,
 e_vert                              = 44,    44,  44,
 dzstretch_s                         = 1.1
 p_top_requested                     = 5000,
 use_surface                         = .false.,
 sfcp_to_sfcp                        = .true.,
 num_metgrid_levels                  = 34,                ! 34 = GFS, 38 = ERA5
 num_metgrid_soil_levels             = 4,
 dx                                  = 18000,
 dy                                  = 18000,
 grid_id                             = 1,     2,   3,
 parent_id                           = 1,     1,   1,
 i_parent_start                      = 1,     11, 15,
 j_parent_start                      = 1,     11, 15,
 parent_grid_ratio                   = 1,     3,   9,
 parent_time_step_ratio              = 1,     3,   9,
 feedback                            = 1,
 smooth_option                       = 0
 /

 &amp;physics
 physics_suite                       = 'TROPICAL'
 mp_physics                          = -1,    -1,  -1,
 cu_physics                          = -1,     0,   0,
 ra_lw_physics                       = -1,    -1,  -1,
 ra_sw_physics                       = -1,    -1,  -1,
 bl_pbl_physics                      = -1,    -1,  -1,
 sf_sfclay_physics                   = -1,    -1,  -1,
 sf_surface_physics                  = -1,    -1,  -1,
 radt                                = 18,    18,  18,
 bldt                                = 0,     0,   0,
 cudt                                = 0,     0,   0,
 icloud                              = 1,
 num_land_cat                        = 21,
 sf_urban_physics                    = 0,     0,   0,
 fractional_seaice                   = 1,
 /

 &amp;fdda
 /

 &amp;dynamics
 hybrid_opt                          = 2, 
 w_damping                           = 0,
 diff_opt                            = 2,      2,   2,
 km_opt                              = 4,      4,   4,
 diff_6th_opt                        = 0,      0,   0,
 diff_6th_factor                     = 0.12,   0.12, 0.12,
 base_temp                           = 290.
 damp_opt                            = 3,
 zdamp                               = 5000.,  5000., 5000.,
 dampcoef                            = 0.2,    0.2,     0.2,
 khdif                               = 0,      0,    0,
 kvdif                               = 0,      0,    0,
 non_hydrostatic                     = .true., .true., .true.,
 moist_adv_opt                       = 1,      1,    1,
 scalar_adv_opt                      = 1,      1,    1,
 gwd_opt                             = 1,      0,    0,
 /

 &amp;bdy_control
 spec_bdy_width                      = 5,
 specified                           = .true.
 /

 &amp;grib2
 /

 &amp;namelist_quilt
 nio_tasks_per_group = 0,
 nio_groups = 1,
 /</code></pre>
</section>
<section id="menjalankan-program-real.exe-dan-wrf.exe" class="level4" data-number="2.4.2.2">
<h4 data-number="2.4.2.2" class="anchored" data-anchor-id="menjalankan-program-real.exe-dan-wrf.exe"><span class="header-section-number">2.4.2.2</span> Menjalankan program <code>real.exe</code> dan <code>wrf.exe</code></h4>
<p>Program <code>real.exe</code> mengeluarkan file-file dalam format <code>.nc</code>, yaitu <code>wrfbdy_d01</code> dan <code>wrfinput_&lt;domain&gt;</code>. Perintah menjalankan program ini adalah sebagai berikut.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./real.exe</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Untuk melihat respon dari program ini, Anda dapat melihat file <code>rsl.errror.0000</code> dengan perintah</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span> rsl.error.0000 <span class="at">-n</span> 1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Jika respon yang diberikan terdapat kalimat <code>real_em: SUCCESS COMPLETE REAL_EM INIT</code>, Anda bisa melanjutkan ke tahapan <code>wrf.exe</code>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./wrf.exe</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Simulasi WRF dari program <code>wrf.exe</code> telah berhasil selesai apabila terdapat kalimat <code>wrf: SUCCESS COMPLETE WRF</code> pada baris terakhir <code>rsl.error.0000</code> dan terdapat file <code>wrfout_d0*</code>. Untuk simulasi ini, terdapat 3 file <code>wrfout_d0*</code>: <code>wrfout_d01_2022-01-01_00:00:00</code>, <code>wrfout_d02_2022-01-01_00:00:00</code>, dan <code>wrfout_d03_2022-01-01_00:00:00</code>. Sejatinya, file-file tersebut berformat <code>*.nc</code> walaupun tidak tertera pada nama file. File <code>wrfout_d0*</code> memiliki interval waktu per 1 jam, dari pukul 00:00 UTC 1 Januari - 18:00 UTC 3 Januari 2022. Langkah selanjutnya, Anda dapat menganalisis luaran WRF dengan aplikasi apapun yang Anda bisa, selama mendukung format <code>*.nc</code>. Hanya saja, Anda perlu mengubah bentuk dan nama variabel WRF untuk disesuaikan dengan <em>CF-Convention</em> dengan program NCL yang telah disediakan di <a href="https://sundowner.colorado.edu/wrfout_to_cf/wrfout_to_cf.ncl">https://sundowner.colorado.edu/wrfout_to_cf/wrfout_to_cf.ncl</a>.</p>
<p>Pengguna Docker di MacOS M1/M2 dapat menyalin file <code>wrfout_*</code> ke direktori lokal dengan perintah sebagai berikut.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> cp <span class="op">&lt;</span>nama-container<span class="op">&gt;</span>:<span class="va">$HOME</span>/WRF-Model/WRF/test/em_real/wrfout_<span class="pp">*</span> .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="visualisasi-luaran-wrf" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="visualisasi-luaran-wrf"><span class="header-section-number">2.5</span> Visualisasi Luaran WRF</h2>
<p>Terdapat 3 file luaran WRF yang telah Anda jalankan dengan masing-masing memiliki resolusi spasial yang berbeda, yaitu 18 km, 6 km, dan 2 km dengan pemilihan lokasi titik tengah longitude dan latitude di Kota Surabaya. Selanjutnya, Anda dapat melihat hasil dari simulasi tersebut dengan berbagai macam perangkat lunak. Pada modul ini, kami menampilkan hasil simulasi dengan menggunakan aplikasi NCL, QGIS, Python, R, dan Julia.</p>
<section id="python" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="python"><span class="header-section-number">2.5.1</span> Python</h3>
<p>Untuk mengetikkan kode Python. Anda dapat menggunakan kode editor <strong>Jupyter Notebook</strong> atau aplikasi lainnya, seperti Visual Studio Code, Notepad++, atau Atom. Untuk langkah-langkah di bawah ini, kami lebih menjelaskan cara penulisan kode Python pada <strong>Jupyter Notebook</strong>. Kode editor ini dapat digunakan pada aplikasi Browser default Anda, misalnya Google Chrome, Safari, atau Microsoft Edge. Kami menyarankan Anda untuk menggunakan <strong>Jupyter Notebook</strong> agar hasil kode langsung bisa ditampilkan sehingga respons dari setiap sel dapat diketahui/dicetak secara langsung. Ikuti langkah-langkah berikut ini untuk membuka <strong>Jupyter Notebook</strong>.</p>
<ol type="1">
<li><p>Bukalah terminal Bash Anda. Saat ini, Anda berada di direktori <code>$HOME</code> atau <code>~</code>.</p></li>
<li><p>Bukalah direktori <code>WRF-Model</code> dengan mengetik perintah</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> WRF-Model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Aktifkan terlebih dahulu <em>Environment</em> <code>ncl</code> dengan perintah <code>conda activate ncl</code>.</p></li>
<li><p>Ketikkan perintah berikut ini untuk memulai pengetikan kode Python. Browser default Anda akan terbuka dengan menampilkan kode editor <strong>Jupyter Notebook</strong> <a href="#fig-jupyter">Gambar&nbsp;<span>2.12</span></a></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="ex">jupyter</span> notebook</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<div id="fig-jupyter" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./Pictures/jupyter-notebook.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.12: Tampilan Jupyter Notebook</figcaption>
</figure>
</div>
<ol start="5" type="1">
<li>Klik <strong>New</strong> dan pilih <strong>Python 3 (ipykernel)</strong>. Tampilan awal <strong>Jupyter Notebook</strong> seperti pada <a href="#fig-jupyter2">Gambar&nbsp;<span>2.13</span></a></li>
</ol>
<div id="fig-jupyter2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./Pictures/jupyter-blank.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.13: Tampilan awal Jupyter Notebook</figcaption>
</figure>
</div>
<ol start="6" type="1">
<li>Anda dapat langsung mendapatkan hasil dari kode yang ditulis pada sel (lihat <code>In [1]</code>) (<a href="#fig-jupyter3">Gambar&nbsp;<span>2.14</span></a>)</li>
</ol>
<div id="fig-jupyter3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./Pictures/jupyter-hello.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.14: Tampilan interaktif Jupyter Notebook</figcaption>
</figure>
</div>
<p>Untuk pengolahan data WRF di Python, kami menggunakan <code>wrf-python</code> <span class="citation" data-cites="wrfpython">(<a href="#ref-wrfpython" role="doc-biblioref">Ladwig 2017</a>)</span>. Paket ini dikembangkan oleh NCAR yang dikhususkan untuk <em>Post-Processing</em> luaran WRF, mendukung pembacaan file, perhitungan interpolasi, serta visualisasi WRF. Perhatikan langkah-langkah berikut cara penggunaannya mulai dari pembacaan file hingga pembuatan grafik.</p>
<ol type="1">
<li>Impor paket</li>
</ol>
<div class="sourceCode" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> netCDF4 <span class="im">import</span> Dataset</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> wrf</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cartopy.crs <span class="im">as</span> crs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li><p>Buka salah satu file <code>wrfout_d0*</code>, misalnya <code>wrfout_d03_2022-01-01_00:00:00</code> dan cetak variabel tersebut, misalkan variabel <code>T2</code> (<em>Air Temperature at 2m</em>: suhu udara 2 meter dari permukaan tanah). Isinya adalah beberapa metadata. Anda dapat mengetahui variabel-variabel di dalamnya dengan menambahkan metode <code>.variables</code>. Anda dapat melihat penjelasan variabel-variabel pada panduan pengguna WRF-ARW.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lokasi folder luaran WRF</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>wrf_path <span class="op">=</span> <span class="st">'/home/absen/WRF-Model/WRF/test/em_real'</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Membuka file wrfout</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>wrf_d03 <span class="op">=</span> Dataset(<span class="ss">f"</span><span class="sc">{</span>wrf_path<span class="sc">}</span><span class="ss">/wrfout_d03_2022-01-01_00:00:00"</span>)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Melihat variabel</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>wrf_d03.variables</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Anda dapat mengambil variabel dengan fungsi <code>wrf.getvar()</code> dengan menyertakan argumen dari nama variabel WRF. Untuk mengambil <code>T2</code>, gunakan perintah di bawah ini. Perhatikan hasil yang diperoleh merupakan tipe <code>xarray.DataArray</code> dan metode <code>wrf.ALL_TIMES</code> pada argumen <code>timeidx</code> berguna untuk mengambil seluruh waktu, mulai dari awal hingga akhir simulasi. Anda dapat mengambil salah satu waktu dengan mencantumkan angka bulat (mis. 0, 1, 2, …).</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>wrf_t2 <span class="op">=</span> wrf.getvar(wrf_d03, <span class="st">"T2"</span>, timeidx<span class="op">=</span>wrf.ALL_TIMES)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Untuk mendapatkan nilai koordinat latitude dan longitude dari variabel <code>T2</code>, Anda dapat memakai fungsi <code>wrf.latlon_coords()</code>. Pastikan dalam satu baris terdapat 2 variabel.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>lats, lons <span class="op">=</span> wrf.latlon_coords(wrf_t2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Untuk mendapatkan waktu, Anda dapat memanggil <em>Coordinates</em> <code>Time</code> yang telah tersedia di dalam <code>wrf_t2</code>.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>wrf_time <span class="op">=</span> wrf_t2.Time</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Anda juga dapat mengekstrak beberapa variabel yang tidak tersedia di dalam WRF, tentunya terbatas, seperti resultan kecepatan angin (<code>wspd</code>), arah angin (<code>wdir</code>), <em>Convective Available Potential Energy</em> (CAPE; <code>cape3d_only</code>/<code>mcape</code>), atau kelembapan relatif (<code>rh2</code>). Anda dapat membaca lebih lanjut di <a href="https://wrf-python.readthedocs.io/en/latest/diagnostics.html">https://wrf-python.readthedocs.io/en/latest/diagnostics.html</a>.</p></li>
<li><p>Variabel curah hujan tidak ada di dalam WRF. Anda harus mengekstrak dan menjumlahkan variabel <code>RAINC</code> (<em>Accumulated Total Cumulus Precipitation</em>) dan <code>RAINNC</code> (<em>Accumulated Total Grid Scale Cumulus Precipitation</em>), maka diperoleh akumulasi curah hujan dari awal sampai akhir waktu simulasi. Anda perlu mengurangi curah hujan dari waktu ke <span class="math inline">\(t\)</span> dengan <span class="math inline">\(t-1\)</span> dengan memanfaatkan program perulangan (<em>looping</em>).</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ekstrak RAINC dan RAINNC</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>rainc  <span class="op">=</span> wrf.getvar(wrf_d03, <span class="st">"RAINC"</span> , timeidx <span class="op">=</span> wrf.ALL_TIMES)</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>rainnc <span class="op">=</span> wrf.getvar(wrf_d03, <span class="st">"RAINNC"</span>, timeidx <span class="op">=</span> wrf.ALL_TIMES)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Menghitung Curah hujan akumulasi</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>rain <span class="op">=</span> rainc <span class="op">+</span> rainnc</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>rain_diff <span class="op">=</span> rain.copy() <span class="co"># Metode .copy() agar var rain tidak ikut terubah</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Lakukan perulangan</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>length <span class="op">=</span> <span class="bu">len</span>(wrf_time.values)</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, length):</span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>   rain_diff[i, :, :] <span class="op">=</span> rain[i, :, :] <span class="op">-</span> rain[i<span class="op">-</span><span class="dv">1</span>, :, :]</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy Attribute (dari RAINC atau RAINNC)</span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>rain_diff.attrs <span class="op">=</span> rainc.attrs</span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambahkan deskripsi</span></span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>rain_diff.attrs[<span class="st">"description"</span>] <span class="op">=</span> <span class="st">"Total Rainfall"</span></span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Menghapus variabel rain untuk mengoptimalkan memori</span></span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> rain</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<p>Setelah berhasil mengekstrak variabel dari langkah sebelumnya, langkah-langkah berikut ini adalah pembuatan grafik spasial dari variabel <code>T2</code>. Untuk membuatnya, Anda membutuhkan tambahan package <code>matplotlib</code> dan <code>cartopy</code>.</p>
<ol type="1">
<li><p>Anda telah mendefinisikan lokasi (variabel <code>lats</code> dan <code>lons</code>) pada langkah sebelumnya. Kedua variabel tersebut digunakan dalam membuat grafik spasial.</p></li>
<li><p>Variabel suhu udara yang telah diekstrak pada langkah sebelumnya memiliki waktu dari awal hingga akhir simulasi. Anda hanya dapat memilih salah satu waktu dalam 1 grafik. Anda juga dapat membuat grafik untuk masing-masing waktu dalam satu grafik dalam bentuk <em>panel plot</em>. Untuk membuat grafik pada waktu tertentu, Anda perlu memilih waktu dan mengetahui letak indeksnya.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>time     <span class="op">=</span> <span class="st">"2022-01-02 13:00:00"</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>time     <span class="op">=</span> np.array([time], dtype<span class="op">=</span><span class="st">'datetime64[ns]'</span>)</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>time_idx <span class="op">=</span> np.where(wrf_time.values <span class="op">==</span> time)[<span class="dv">0</span>]</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>time_idx <span class="op">=</span> <span class="bu">int</span>(time_idx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Sebagai contoh skrip di bawah ini untuk membuat grafik spasial hanya satu waktu.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengambil informasi sistem proyeksi peta (dalam data ini adalah mercator)</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>cart_proj <span class="op">=</span> wrf.get_cartopy(wrf_t2, timeidx<span class="op">=</span>time_idx)</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Membuat dan mengatur ukuran grafik</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">10</span>))</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengatur sistem proyeksi sesuai metadata WRF</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> plt.axes(projection<span class="op">=</span>cart_proj)</span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Menambahkan garis pantai. Sumber data: www.naturalearthdata.com</span></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>ax.coastlines(linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Menambahkan garis lintang dan bujur</span></span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a>gl <span class="op">=</span> ax.gridlines(draw_labels<span class="op">=</span><span class="va">True</span>, linewidth<span class="op">=</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'gray'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a>gl.top_labels <span class="op">=</span> <span class="va">False</span>   <span class="co"># Menghilangkan label bujur di atas</span></span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a>gl.right_labels <span class="op">=</span> <span class="va">False</span> <span class="co"># Menghilangkan label lintang di kanan</span></span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-17"><a href="#cb102-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengatur nilai untuk skala legenda  </span></span>
<span id="cb102-18"><a href="#cb102-18" aria-hidden="true" tabindex="-1"></a>lvl <span class="op">=</span> np.arange(<span class="dv">290</span>, <span class="dv">304</span>, <span class="dv">2</span>)</span>
<span id="cb102-19"><a href="#cb102-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-20"><a href="#cb102-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Menambahkan garis kontur terisi</span></span>
<span id="cb102-21"><a href="#cb102-21" aria-hidden="true" tabindex="-1"></a>plt.contourf(lons, lats, wrf_t2[time_idx, :, :],</span>
<span id="cb102-22"><a href="#cb102-22" aria-hidden="true" tabindex="-1"></a>            levels<span class="op">=</span>lvl,</span>
<span id="cb102-23"><a href="#cb102-23" aria-hidden="true" tabindex="-1"></a>            transform<span class="op">=</span>crs.PlateCarree(),</span>
<span id="cb102-24"><a href="#cb102-24" aria-hidden="true" tabindex="-1"></a>            cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb102-25"><a href="#cb102-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-26"><a href="#cb102-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Menambahkan legenda warna</span></span>
<span id="cb102-27"><a href="#cb102-27" aria-hidden="true" tabindex="-1"></a>plt.colorbar(ax<span class="op">=</span>ax, shrink<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb102-28"><a href="#cb102-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-29"><a href="#cb102-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Menampilkan grafik</span></span>
<span id="cb102-30"><a href="#cb102-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<div id="fig-wrft2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Pictures/wrf-t2-output.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.15: Grafik suhu udara 2-meter di atas permukaan tanah pada 2022-01-02 13:00:00 UTC</figcaption>
</figure>
</div>
<p>Selain spasial, Anda dapat pula menampilkan grafik seri waktu untuk titik koordinat atau rata-rata grid tertentu.</p>
<ol type="1">
<li><p>Tentukan titik koordinat yang akan dibuat grafik seri waktu</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>lats_sel <span class="op">=</span> <span class="op">-</span><span class="fl">7.271372797667375</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>lons_sel <span class="op">=</span> <span class="fl">112.73417496409039</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Untuk menentukan indeks dari titik koordinat yang telah didefinisikan tersebut, gunakan fungsi <code>wrf.ll_to_xy()</code>. Nilai yang dikeluarkan adalah indeks dari lokasi terdekat.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>latlon_idx <span class="op">=</span> wrf.ll_to_xy(wrf_d03, lats_sel, lons_sel)</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>wrf_t2_sel <span class="op">=</span> wrf_t2[:, latlon_idx[<span class="dv">1</span>], latlon_idx[<span class="dv">0</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Lakukan plot seri waktu</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengatur ukuran grafik</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>ax  <span class="op">=</span> plt.axes()</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot -&gt; x: waktu, y: suhu udara (K)</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>ax.plot(wrf_time, wrf_t2_sel.values)</span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengatur label dan judul </span></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Waktu'</span>)</span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Suhu udara 2m (K)'</span>)</span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="ss">f'Suhu udara di </span><span class="sc">{</span>lats_sel<span class="sc">}</span><span class="ss">$^\circ$, </span><span class="sc">{</span>lons_sel<span class="sc">}</span><span class="ss">$^\circ$'</span>)</span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Tampilkan grafik</span></span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pictures/wrf-t2-output_TS.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Grafik seri waktu suhu udara 2-meter di atas permukaan tanah</figcaption>
</figure>
</div>
</section>
<section id="python-tanpa-wrf-python" class="level3" data-number="2.5.2">
<h3 data-number="2.5.2" class="anchored" data-anchor-id="python-tanpa-wrf-python"><span class="header-section-number">2.5.2</span> Python (tanpa <code>wrf-python</code>)</h3>
<p>Anda juga dapat mengolah data luaran WRF tanpa memakai <code>wrf-python</code>. Anda bisa menggunakan modul <code>xarray</code> untuk membaca dan memanipulasi data. Perlu Anda ketahui bahwa data koordinat (latitude, longitude, dan waktu) dari luaran WRF akan terlihat berbeda karena belum menyesuaikan <strong>CF-Conventions</strong>. Oleh sebab itu, Anda bisa mengkonversi data WRF menjadi format <strong>CF-Conventions</strong> dengan NCL lalu dibaca dengan mengikuti langkah-langkah di bawah ini. Beberapa langkah di bawah ini, kami menjelaskan cara-cara teknik pembacaan data WRF tanpa mengikuti <strong>CF-Conventions</strong>.</p>
<ol type="1">
<li>Impor paket</li>
</ol>
<div class="sourceCode" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> xarray <span class="im">as</span> xr</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cartopy.crs <span class="im">as</span> crs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li><p>Buka salah satu file <code>wrfout_d0*</code>, misalnya <code>wrfout_d03_2022-01-01_00:00:00</code> dan cetak variabel tersebut, misalkan variabel <code>T2</code> (<em>Air Temperature at 2m</em>: suhu udara 2 meter dari permukaan tanah). Untuk melihat semua variabel, ketik saja nama variabel Python yang telah didefinisikan.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lokasi folder luaran WRF</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>wrf_path <span class="op">=</span> <span class="st">'/home/absen/WRF-Model/WRF/test/em_real'</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Membuka file wrfout</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>wrf_d03 <span class="op">=</span> xr.open_dataset(<span class="ss">f"</span><span class="sc">{</span>wrf_path<span class="sc">}</span><span class="ss">/wrfout_d03_2022-01-01_00:00:00"</span>)</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Mencetak isi semua variabel</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>wrf_d03</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengambil variabel</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>wrf_t2m <span class="op">=</span> wrf_d03[<span class="st">'T2'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Pada langkah sebelumnya, Anda bisa langsung melakukan pembuatan grafik spasial</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>time     <span class="op">=</span> <span class="st">"2022-01-02 13:00:00"</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>time     <span class="op">=</span> np.array([time], dtype<span class="op">=</span><span class="st">'datetime64[ns]'</span>)</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>time_idx <span class="op">=</span> np.where(wrf_tme <span class="op">==</span> time)[<span class="dv">0</span>]</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>time_idx <span class="op">=</span> <span class="bu">int</span>(time_idx)</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>wrf_t2m[time_idx, :, :].plot.contourf()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Akan tetapi, informasi koordinat spasial seperti latitude dan longitude tidak sesuai, yang ditampilkan hanyalah indeks lokasi (0, 1, 2, …). Anda perlu memodifikasi <code>wrf_t2m</code> dengan cara memodifikasi informasi koordinat dengan mengambil variabel lokasi dan waktu di dalam file <code>wrfout_d0*</code>. Untuk latitude dan longitude, Anda bisa mengambil variabel <code>XLAT</code> dan <code>XLONG</code>. Variabel waktu (<code>XTIME</code>) di dalam informasi <code>coordinates</code> tidak perlu dimodifikasi. Berikut ini adalah contoh kode untuk memodifikasi informasi koordinat.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># Mengambil variabel XLAT dan XLONG</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a> wrf_lat <span class="op">=</span> wrf_d03[<span class="st">'XLAT'</span>][<span class="dv">0</span>, :, <span class="dv">0</span>].values</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a> wrf_lon <span class="op">=</span> wrf_d03[<span class="st">'XLONG'</span>][<span class="dv">0</span>, <span class="dv">0</span>, :].values</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a> <span class="co"># Mengambil variabel XTIME</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a> wrf_tme <span class="op">=</span> wrf_d03[<span class="st">'XTIME'</span>].values</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a> <span class="co"># Membuat DataArray baru dengan informasi koordinat yang telah dimodifikasi</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a> wrf_t2m_new <span class="op">=</span> xr.DataArray(wrf_t2m.values,</span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>                        coords <span class="op">=</span> {<span class="st">'time'</span>: wrf_tme,</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">'lat'</span>: wrf_lat, </span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">'lon'</span>: wrf_lon},</span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>                         dims <span class="op">=</span> [<span class="st">'time'</span>, <span class="st">'lat'</span>, <span class="st">'lon'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Terakhir, Anda bisa melakukan pembuatan grafik spasial dengan memanggil variabel <code>wrf_t2m_new</code> yang telah dimodifikasi informasi koordinatnya. Tampilan grafik sama seperti <a href="#fig-wrft2">Gambar&nbsp;<span>2.15</span></a>.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Membuat dan mengatur ukuran grafik</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">7</span>))</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengatur sistem proyeksi peta</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> plt.axes(projection<span class="op">=</span>crs.PlateCarree())</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Menambahkan garis pantai. Sumber data: www.naturalearthdata.com</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>ax.coastlines(linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Menambahkan garis lintang dan bujur</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>gl <span class="op">=</span> ax.gridlines(draw_labels<span class="op">=</span><span class="va">True</span>, linewidth<span class="op">=</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'gray'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>gl.top_labels <span class="op">=</span> <span class="va">False</span>   <span class="co"># Menghilangkan label bujur di atas</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a>gl.right_labels <span class="op">=</span> <span class="va">False</span> <span class="co"># Menghilangkan label lintang di kanan</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengatur nilai untuk skala legenda  </span></span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a>lvl <span class="op">=</span> np.arange(<span class="dv">290</span>, <span class="dv">304</span>, <span class="dv">2</span>)</span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-17"><a href="#cb110-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Menambahkan garis kontur terisi</span></span>
<span id="cb110-18"><a href="#cb110-18" aria-hidden="true" tabindex="-1"></a>plt.contourf(wrf_lon, wrf_lat, wrf_t2m_new[time_idx, :, :],</span>
<span id="cb110-19"><a href="#cb110-19" aria-hidden="true" tabindex="-1"></a>            levels<span class="op">=</span>lvl,</span>
<span id="cb110-20"><a href="#cb110-20" aria-hidden="true" tabindex="-1"></a>            cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb110-21"><a href="#cb110-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-22"><a href="#cb110-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Menambahkan legenda warna</span></span>
<span id="cb110-23"><a href="#cb110-23" aria-hidden="true" tabindex="-1"></a>plt.colorbar(ax<span class="op">=</span>ax, shrink<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb110-24"><a href="#cb110-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-25"><a href="#cb110-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Menampilkan grafik</span></span>
<span id="cb110-26"><a href="#cb110-26" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="r" class="level3" data-number="2.5.3">
<h3 data-number="2.5.3" class="anchored" data-anchor-id="r"><span class="header-section-number">2.5.3</span> R</h3>
<p>Anda dapat menggunakan RStudio untuk menuliskan skrip R. Untuk mengolah data WRF di R, Anda perlu memasang package <code>ncdf4</code> dan <code>raster</code> terlebih dahulu. Untuk kebutuhan plot seri waktu, kami menggunakan package <code>tidyverse</code>.</p>
<ol type="1">
<li><p>Sebelum memulai pengetikan kode R, buatlah file skrip R dengan memilih menu <strong>File &gt; New File &gt; R Script</strong>.</p></li>
<li><p>Di console R pada RStudio, gunakan perintah berikut untuk memasang <code>ncdf4</code> dan <code>raster</code>.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">'ncdf4'</span>, <span class="st">'raster'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Anda juga dapat menggunakan menu pada RStudio: <strong>Tools &gt; Install Packaages</strong>. Kemudian, ketik “<code>ncdf4</code>, <code>raster</code>” (tanpa tanda petik) pada bagian <em>Packages (separate multiple with space or comma)</em>. Setelah itu, klik <em>Install</em>.</p></li>
<li><p>Kami telah menyediakan fungsi skrip R untuk membuka file luaran WRF. Pada teks editor di RStudio, masukkan perintah berikut untuk mengimpor package <code>ncdf4</code> dan <code>raster</code> beserta skrip <code>wrf-raster.R</code>. Fungsi <code>wrf-raster.R</code> dapat diunduh di <a href="https://github.com/agungbaruna/modul-pemodelan-iklim/blob/main/scripts/wrf-raster.R">https://github.com/agungbaruna/modul-pemodelan-iklim/blob/main/scripts/wrf-raster.R</a>. Letakkan fungsi ini di dalam folder <strong>Project RStudio</strong> Anda.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ncdf4)</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">'wrf-raster.R'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Anda dapat menjalankan ketiga baris kode tersebut dengan memblok seluruh baris atau arahkan kursor pada akhir kode kemudian tekan tombol <strong>CTRL + ENTER</strong>.</p></li>
<li><p>Saat Anda menjalankan <code>source('wrf-raster.R')</code>, muncul Functions dengan nama <code>wrf.raster</code> pada jendela <strong>Environment</strong> di RStudio (letak jendela di sebelah kanan atas).</p></li>
<li><p>Untuk menggunakan fungsi <code>wrf.raster()</code>, Anda hanya membutuhkan argumen <code>wrf.file</code> (nama folder <code>wrfout_*</code>) dan <code>var.name</code> (nama variabel di dalam <code>wrfout_*</code>). Nilai kembalian setelah menjalankan fungsi ini berbentuk <code>RasterBrick</code>. Argumen <code>nlev</code> dapat dicantumkan dengan angka bilangan bulat (1, 2, 3, …) khusus untuk variabel yang memiliki variasi terhadap ketinggian dan kedalaman, seperti suhu udara atau suhu tanah. Variabel lain yang tidak tercantum seperti curah hujan, sudah tersedia di dalam fungsi ini (<code>var.name = rain</code>).</p></li>
<li><p>Sebagai contoh mengambil variabel curah hujan.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>rain <span class="ot">&lt;-</span> <span class="fu">wrf.raster</span>(<span class="at">wrf.file =</span> <span class="st">'/home/absen/WRF-Model/WRF/test/em_real/wrfout_d01_2022-01-01_00:00:00'</span>, <span class="at">var.name =</span> <span class="st">'rain'</span>)</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>rain</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>class      : RasterBrick
dimensions : 32, 32, 1024, 67  (nrow, ncol, ncell, nlayers)
resolution : 0.1581326, 0.1567945  (x, y)
extent     : 110.2099, 115.2701, -9.821663, -4.804237  (xmin, xmax, ymin, ymax)
crs        : +proj=longlat +datum=WGS84 +no_defs
source     : memory
names      :   layer.1,   layer.2,   layer.3,   layer.4,   layer.5,   layer.6,  ...
min values :         0,         0,         0,         0,         0,         0,  ...
max values :  0.000000,  2.944275,  2.439148,  6.013021, 14.848666, 47.531946,  ...
time       : 2022-01-01 00:00:00, 2022-01-03 18:00:00 (min, max)</code></pre>
<p>Pada respons melalui console R, terdapat berbagai informasi seperti <code>dimensions</code>, <code>resolution</code>, <code>crs</code>, serta <code>time</code>. Anda dapat mudah memahami isi dari file <code>wrfout_d01*</code> tersebut.</p></li>
<li><p>Anda bisa langsung membuat grafik spasial dengan perintah 1 baris ini dan ditampilkan pada <a href="#fig-wrfraster">Gambar&nbsp;<span>2.16</span></a>. Cukup sederhana.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(rain)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<div id="fig-wrfraster" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Pictures/wrf-raster-plot.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Gambar&nbsp;2.16: Plot curah hujan per 1 jam dari <code>wrfout_d01*</code></figcaption>
</figure>
</div>
<ol start="8" type="1">
<li><p>Untuk membuat grafik seri waktu pada lokasi tertentu, Anda dapat menggunakan fungsi <code>extract()</code> dan <code>plot()</code></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Waktu</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>time_sel <span class="ot">&lt;-</span> <span class="fu">getZ</span>(rain)</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Lokasi</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>lats_sel <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">7.271372797667375</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>lons_sel <span class="ot">&lt;-</span> <span class="fl">112.73417496409039</span></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Ekstrak nilai curah hujan berdasarkan lokasi</span></span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>rain_sel <span class="ot">&lt;-</span> <span class="fu">extract</span>(rain, <span class="fu">data.frame</span>(<span class="at">x =</span> lons_sel, <span class="at">y =</span> lats_sel))</span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot grafik seri waktu</span></span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> time_sel, <span class="at">y =</span> rain_sel[<span class="dv">1</span>,])) <span class="sc">+</span></span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_x_datetime</span>(<span class="st">"Waktu (UTC)"</span>, <span class="at">date_labels =</span> <span class="st">"%Y-%m-%d %H:%M"</span>) <span class="sc">+</span></span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_y_continuous</span>(<span class="st">"Curah Hujan (mm/jam)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<img src="Pictures/wrfout-timeseries-r.png" class="img-fluid" alt="Grafik seri waktu curah hujan per 1 jam"></li>
</ol>
</section>
<section id="ncl" class="level3" data-number="2.5.4">
<h3 data-number="2.5.4" class="anchored" data-anchor-id="ncl"><span class="header-section-number">2.5.4</span> NCL</h3>
<p>NCAR telah menyediakan contoh skrip pengolahan data WRF dengan NCL. Anda dapat mengakses lebih banyak di <a href="https://www.ncl.ucar.edu/Applications/wrf.shtml">https://www.ncl.ucar.edu/Applications/wrf.shtml</a>. File netcdf luaran WRF pada dasarnya berbeda dengan file netcdf pada umumnya karena tidak mengikuti pedoman <a href="http://cf-pcmdi.llnl.gov/"><em>Climate and Forecast Convention</em></a>. Alhasil, mengolah data WRF menggunakan aplikasi lain seperti ArcMap atau Matlab cukup rumit. Jika Anda ingin cukup mudah mengolahnya dengan aplikasi lainnya, skrip NCL untuk mengubah WRF menjadi CF-Convention dibuat oleh Mark Seefeldt dan telah tersedia di <a href="https://sundowner.colorado.edu/wrfout_to_cf/wrfout_to_cf.ncl">https://sundowner.colorado.edu/wrfout_to_cf/wrfout_to_cf.ncl</a>. Berikut ini adalah cara penggunakan skrip <code>wrfout_to_cf.ncl</code>.</p>
<ol type="1">
<li><p>Aktifkan terlebih dahulu <em>environment</em> <code>ncl</code> pada terminal. Tulisan <code>(base)</code> menjadi <code>(ncl)</code> setelah perintah berhasil dipanggil.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate ncl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Anda hanya perlu memasukkan variabel <code>dir_in</code> (lokasi folder wrfout), <code>dir_out</code> (lokasi folder wrfout setelah dikonversi), <code>file_in</code> (nama file wrfout), dan <code>file_out</code> (nama file wrfout setelah dikonversi).</p></li>
<li><p>Masukkan perintah berikut.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ncl</span> <span class="st">'dir_in="/home/absen/WRF-Model/WRF/test/em_real/"'</span> <span class="st">'file_in="wrfout_d01_2022-01-01_00:00:00"'</span> <span class="st">'file_out="wrfout_cf_d01_2022-01-01_00:00:00.nc"'</span> wrfout_to_cf.ncl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Anda dapat mengolah data luaran WRF setelah dikonversi menjadi CF-Convention pada aplikasi apapun dengan mudah. Hanya saja, Anda perlu memperhatikan perubahan nama variabel dan sesuaikan dengan data WRF asli.</p></li>
</ol>
<p>Selain mengubah menjadi CF-Convention, Anda dapat langsung menerapkan skrip NCL untuk analisis maupun visualisasi. Sebagai contoh skrip berikut ini untuk menampilkan suhu udara dekat permukaan dari luaran <code>wrfout_d01*</code>. Perlu diperhatikan bahwa simbol <code>;</code> adalah komentar di dalam NCL. Anda dapat mengganti format file dari luaran skrip ini (mis. <code>png</code>, <code>pdf</code>, atau <code>x11</code>).</p>
<pre class="ncl"><code>;---Read file
fpath    = "/home/absen/WRF-Model/WRF/test/em_real/"
filename = "wrfout_d01_2022-01-01_00:00:00"
a        = addfile(fpath+filename, "r")

;---Get CEN_LAT and CEN_LON from WRF metadata (in global attributes)
cen_lat = a@CEN_LAT
cen_lon = a@CEN_LON

;---Select time index
nt = 30

;---Read temperature at first time step
tc = wrf_user_getvar(a, "tc", nt)

;---Open worksheet
wks = gsn_open_wks("png", "wrf_nogsn") ; Format file luaran grafik, contoh png

;---Set up resource list
res                      = True
res@gsnDraw              = False
res@gsnFrame             = False
res@tfDoNDCOverlay       = True

;---Plotting options for air temperature
opts_r                      = res

opts_r@cnFillOn             = True
opts_r@cnLevelSelectionMode = "ExplicitLevels"
opts_r@cnLevels             = (/ 20, 22, 24, 26, 28, 30, 32 /)
opts_r@cnSmoothingOn        = True
opts_r@cnSmoothingDistanceF = .005

;---Option for plt_res
plt_res = res

;---Option for plt_res
map_res = res
map_res@mpDataBaseVersion           = "HighRes"            ; Jika memilih "HighRes", Anda harus mengunduh semua file di  
map_res@mpDataResolution            = "FinestResolution"   ; https://www.io-warnemuende.de/rangs-en.html
map_res@mpCenterLatF                = cen_lat              ; dan letakkan di folder $NCARG_ROOT/lib/ncarg/database/rangs
map_res@mpCenterLonF                = cen_lon
map_res@mpGeophysicalLineColor      = "black"
map_res@mpGeophysicalLineThicknessF = 2.0
map_res@mpGridSpacingF              = 1.0
map_res@mpGridLineColor             = "black"

;---Plot
contour_tot = wrf_contour(a, wks, tc(0,:,:), opts_r)
plot = wrf_map_overlays(a, wks, (/contour_tot/), plt_res, map_res)</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pictures/wrf_nogsn.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Plot suhu udara dekat permukaan pada 2022-01-02 06:00:00 UTC</figcaption>
</figure>
</div>
</section>
<section id="qgis" class="level3" data-number="2.5.5">
<h3 data-number="2.5.5" class="anchored" data-anchor-id="qgis"><span class="header-section-number">2.5.5</span> QGIS</h3>
<p>Aplikasi QGIS dapat juga digunakan untuk mengolah data WRF. Untuk memudahkan pengolahan data WRF, Anda perlu mengubah data WRF menjadi CF-Convention dengan skrip NCL sebelumnya. Setelah itu, Anda dapat mengimpor data WRF yang telah terkonversi dalam format NetCDF Classic ke QGIS. Berikut ini adalah langkah-langkahnya.</p>
<ol type="1">
<li><p>Pada menu QGIS, pilih <code>Layer</code> &gt; <code>Add Layer</code> &gt; <code>Add Raster Layer</code> (CTRL + SHIFT + R).</p></li>
<li><p>Pada bagian <strong>Source</strong>, klik ikon <code>...</code> dan pilih file <code>wrfout_*</code> yang telah dikonversi menjadi CF-Convention.</p>
<img src="Pictures/qgis-addnetcdf.png" class="img-fluid" style="width:80.0%" alt="Import data WRF ke QGIS"></li>
<li><p>Pilih variabel yang ingin Anda tampilkan. Misalnya, Anda dapat memilih <code>T_2m</code> untuk menampilkan suhu udara pada ketinggian 2 meter. Klik <code>Add Layers</code>, kemudian klik <code>Add</code>.</p></li>
<li><p>Klik kanan pada raster yang telah diimpor dan pilih <code>Properties</code>. Pada <strong>Band Rendering</strong> di bagian <em>Render type</em>, pilih Singleband Gray. Pada bagian <em>Gray band</em>, terdapat pilihan nomor <em>Band</em> yang berisikan waktu.</p>
<img src="Pictures/qgis-changeproperties.png" class="img-fluid" style="width:80.0%" alt="Layer properties">
<p>Nilai maksimum dan minimum suhu udara dapat terlihat di bawah layer.</p></li>
<li><p>Setelah berhasil mengimpor, data raster dari WRF belum terproyeksi ke koordinat. Default sistem proyeksi pada QGIS kami adalah <strong>EPSG:4326 - WGS 84</strong>. Untuk mengubah sistem proyeksi, klik menu <code>Raster</code> &gt; <code>Projections</code> &gt; <code>Warp (Reproject)</code>. Bagian <code>Input layer</code> diisi dengan raster yang akan diubah sistem proyeksinya dan <code>Target CRS</code> diisi dengan <strong>EPSG:4326 - WGS 84</strong>. Kemudian, klik <code>Run</code>.</p>
<img src="Pictures/qgis-reproject.png" class="img-fluid" style="width:80.0%" alt="Reproyeksi raster">
<p>Layer raster baru akan muncul dengan nama <strong>Reprojected</strong>. Klik kanan pada raster tersebut dan pilih <strong>Zoom to Layer(s)</strong></p></li>
<li><p>Agar lebih meyakinkan, Anda dapat mengimpor file vector dari batas wilayah Indonesia. Untuk data ini, bisa Anda unduh di <a href="https://gadm.org">gadm.org</a>. Pada contoh ini, kami menggunakan file <code>*.json</code>. Untuk mengimpornya, klik menu <code>Layer</code> &gt; <code>Add Layer</code> &gt; <code>Add Vector Layer</code> (CTRL + SHIFT + V). Pada bagian <strong>Source</strong>, klik ikon <code>...</code> dan pilih file <code>gadm41_IDN_1.json</code>. Klik <code>Add Layers</code>, kemudian klik <code>Add</code>.</p>
<img src="Pictures/qgis-addvector.png" class="img-fluid" style="width:80.0%" alt="Import data vector"></li>
</ol>
</section>
<section id="julia-1" class="level3" data-number="2.5.6">
<h3 data-number="2.5.6" class="anchored" data-anchor-id="julia-1"><span class="header-section-number">2.5.6</span> Julia</h3>
<p>Selain R dan Python, bahasa pemrograman Julia juga dapat digunakan untuk mengolah data WRF. Hanya saja, package khusus untuk WRF masih belum tersedia. Julia dapat digunakan di sistem operasi apa saja. Untuk pengguna Windows 10/11, Anda bisa menggunakan WSL atau terminal Windows langsung. Untuk membaca data netcdf dari WRF, algoritma yang kami berikan cukup memerlukan logika sehingga tidak semudah mengolahnya seperti di R. Anda dapat menggunakan package <code>NCDatasets.jl</code>, sedangkan untuk membuat grafik menggunakan <code>Plots.jl</code>. Berikut ini adalah langkah-langkahnya.</p>
<ol type="1">
<li><p>Buka terminal interaktif Julia dengan mengetik <code>julia.exe</code> pada Command Prompt/PowerShell atau carilah program Julia pada Start Menu.</p></li>
<li><p>Buka <strong>Jupyter Notebook</strong> pada terminal interaktif Julia dengan perintah berikut ini.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">IJulia</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">notebook</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Aktifkan package <code>NCDatasets.jl</code> dan <code>Plots.jl</code>.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">NCDatasets</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Anda dapat menggunakan fungsi <code>ncread()</code> untuk membaca data WRF sekaligus menentukan variabel yang ingin diimpor. Berikut ini adalah contoh untuk mengimpor data suhu udara pada ketinggian 2 meter.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>wrf_path <span class="op">=</span> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">taats</span><span class="sc">\\</span><span class="st">Desktop</span><span class="sc">\\</span><span class="st">"</span>;</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>wrf_file <span class="op">=</span> <span class="fu">joinpath</span>(wrf_path, <span class="st">"wrfout_d01_2022-01-01_00"</span>);</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>ds <span class="op">=</span> <span class="fu">NCDataset</span>(wrf_file, <span class="st">"r"</span>);</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>t2 <span class="op">=</span> ds[<span class="st">"T2"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>T2 (32 × 32 × 67)
  Datatype:    Float32
  Dimensions:  west_east × south_north × Time
  Attributes:
  FieldType            = 104
  MemoryOrder          = XY 
  description          = TEMP at 2 M
  units                = K
  stagger              = 
  coordinates          = XLONG XLAT XTIME</code></pre></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled" title="Catatan">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Catatan
</div>
</div>
<div class="callout-body-container callout-body">
<p>Perhatikan tanda <code>;</code> pada akhir baris kode. Tanda ini digunakan untuk menghilangkan respons dari kode tersebut. Cara ini sama seperti sintaks pada Matlab.</p>
</div>
</div>
<p>Dimensi pada variabel <code>t2</code> bervariasi terhadap longitude (west_east), latitude (south_north), dan waktu (Time) secara berturut-turut. Cara membaca dimensi ini sama seperti pada package <code>ncdf4</code> di R. Hanya saja, ini sudah didefinisikan di dalam skrip <code>wrf-raster.R</code>.</p>
<ol start="3" type="1">
<li><p>Sebelum menampilkan data, Anda perlu mengambil lokasi (latitude dan longitude).</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>lat <span class="op">=</span> ds[<span class="st">"XLAT"</span>][<span class="fl">1</span>, <span class="op">:</span>, <span class="fl">1</span>];</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>lon <span class="op">=</span> ds[<span class="st">"XLONG"</span>][<span class="op">:</span>, <span class="fl">1</span>, <span class="fl">1</span>];</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Anda dapat menampilkan grafik spasial untuk 1 waktu dengan package <code>Plots.jl</code> dengan fungsi <code>heatmap()</code>.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>nt <span class="op">=</span> <span class="fl">1</span> <span class="co"># Indeks waktu = "2022-01-01 00:00:00"</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="fu">heatmap</span>(lon, lat, <span class="fu">transpose</span>(t2[<span class="op">:</span>, <span class="op">:</span>, nt]))</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"latitude"</span>)  <span class="co"># Menambahkan label sumbu y </span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"longitude"</span>) <span class="co"># Menambahkan label sumbu x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Nilai pada setiap baris dari <code>t2</code> bervariasi terhadap longitude, sedangkan pada kolom bervariasi terhadap latitude. Untuk menampilkan grafik dengan koordinat yang benar, Anda perlu membalikkan (baris ke kolom, dan sebaliknya) pada matriks <code>t2</code> dengan fungsi <code>transpose()</code>.</p>
<img src="Pictures/jl-t2-grid.png" class="img-fluid" style="width:80.0%" alt="Grafik grid/raster suhu udara 2m"></li>
<li><p>Selain divisualisasikan dalam bentuk grid/raster, Anda juga dapat menampilkan dalam bentuk kontur terisi dengan fungsi <code>contourf()</code> dari package <code>Plots.jl</code>.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>nt <span class="op">=</span> <span class="fl">10</span> <span class="co"># Indeks waktu = "2022-01-01 09:00:00"</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="fu">contourf</span>(lon, lat, <span class="fu">transpose</span>(t2[<span class="op">:</span>, <span class="op">:</span>, nt]))</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"latitude"</span>)  <span class="co"># Menambahkan label sumbu y </span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"longitude"</span>) <span class="co"># Menambahkan label sumbu x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<img src="Pictures/jl-t2-contourf.png" class="img-fluid" style="width:80.0%" alt="Grafik kontur terisi suhu udara 2m"></li>
<li><p>Untuk grafik seri waktu, Anda dapat menggunakan fungsi <code>plot()</code> dari package <code>Plots.jl</code>. Berikut ini adalah contoh untuk menampilkan grafik seri waktu suhu udara pada ketinggian 2 meter.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Dates</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Mengambil variabel waktu</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>time <span class="op">=</span> ds[<span class="st">"XTIME"</span>];</span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>ticks <span class="op">=</span> <span class="bu">Dates</span>.<span class="fu">format</span>.(time, <span class="st">"yyyy-mm-dd HH:MM"</span>);</span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Pemilihan lokasi</span></span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>lats_sel <span class="op">=</span>  <span class="op">-</span><span class="fl">7.27</span>;</span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a>lons_sel <span class="op">=</span> <span class="fl">112.73</span>;</span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>lat_idx <span class="op">=</span> <span class="fu">findall</span>(y <span class="op">-&gt;</span> (y <span class="op">&gt;</span> lats_sel <span class="op">-</span> <span class="fl">0.1</span>) <span class="op">&amp;&amp;</span> (y <span class="op">&lt;</span> lats_sel <span class="op">+</span> <span class="fl">0.1</span>), lat);</span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a>lon_idx <span class="op">=</span> <span class="fu">findall</span>(x <span class="op">-&gt;</span> (x <span class="op">&gt;</span> lons_sel <span class="op">-</span> <span class="fl">0.1</span>) <span class="op">&amp;&amp;</span> (x <span class="op">&lt;</span> lons_sel <span class="op">+</span> <span class="fl">0.1</span>), lon);</span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a>lons <span class="op">=</span> lon[lon_idx];</span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a>lats <span class="op">=</span> lat[lat_idx];</span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Membuat grafik seri waktu</span></span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ticks, t2[lon_idx[<span class="fl">1</span>], lat_idx[<span class="fl">1</span>], <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(time)], </span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a>     labels<span class="op">=</span><span class="st">"</span><span class="sc">$</span>(lons[<span class="fl">1</span>])<span class="st">; </span><span class="sc">$</span>(lats[<span class="fl">1</span>])<span class="st">"</span>, xrotation<span class="op">=</span><span class="fl">45</span>)</span>
<span id="cb127-20"><a href="#cb127-20" aria-hidden="true" tabindex="-1"></a><span class="fu">plot!</span>(ticks, t2[lon_idx[<span class="fl">2</span>], lat_idx[<span class="fl">1</span>], <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(time)],</span>
<span id="cb127-21"><a href="#cb127-21" aria-hidden="true" tabindex="-1"></a>     labels<span class="op">=</span><span class="st">"</span><span class="sc">$</span>(lons[<span class="fl">2</span>])<span class="st">; </span><span class="sc">$</span>(lats[<span class="fl">1</span>])<span class="st">"</span>)</span>
<span id="cb127-22"><a href="#cb127-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"Suhu udara 2m (°C)"</span>) <span class="co"># Menambahkan label sumbu y </span></span>
<span id="cb127-23"><a href="#cb127-23" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"Waktu (per 1 jam)"</span>)  <span class="co"># Menambahkan label sumbu x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<img src="Pictures/jl-t2-time.png" class="img-fluid" style="width:80.0%" alt="Grafik seri waktu suhu udara 2m dari dua grid"></li>
</ol>


<div id="refs" class="references csl-bib-body" role="list">
<div id="ref-bao2018large" class="csl-entry" role="listitem">
Bao J, Chow FK, Lundquist KA. 2018. Large-eddy simulation over complex terrain using an improved immersed boundary method in the weather research and forecasting model. <em>Monthly Weather Review</em>. 146(9):2781–2797.
</div>
<div id="ref-glotter2014" class="csl-entry" role="listitem">
Glotter M, Elliott J, McInerney D, Best N, Foster I, Moyer EJ. 2014. Evaluating the utility of dynamical downscaling in agricultural impacts projections. <em>Proceedings of the National Academy of Sciences</em>. 111(24):8776–8781.
</div>
<div id="ref-goly2014" class="csl-entry" role="listitem">
Goly A, Teegavarapu RS, Mondal A. 2014. Development and evaluation of statistical downscaling models for monthly precipitation. <em>Earth Interactions</em>. 18(18):1–28.
</div>
<div id="ref-huth2000" class="csl-entry" role="listitem">
Huth R, Kyselỳ J. 2000. Constructing site-specific climate change scenarios on a monthly scale using statistical downscaling. <em>Theoretical and Applied Climatology</em>. 66(1):13–27.
</div>
<div id="ref-kim1984" class="csl-entry" role="listitem">
Kim J, Chang J, Baker N, Wilks D, Gates W. 1984. The statistical problem of climate inversion: Determination of the relationship between local and large-scale climate. <em>Monthly weather review</em>. 112(10):2069–2077.
</div>
<div id="ref-wrfpython" class="csl-entry" role="listitem">
Ladwig W. 2017. Wrf-python version 1.3.4.doi:<a href="https://doi.org/10.5065/D6W094P1">https://doi.org/10.5065/D6W094P1</a>.
</div>
<div id="ref-pahlavan2018" class="csl-entry" role="listitem">
Pahlavan H, Zahraie B, Nasseri M, Mahdipour Varnousfaderani A. 2018. Improvement of multiple linear regression method for statistical downscaling of monthly precipitation. <em>International journal of environmental science and technology</em>. 15(9):1897–1912.
</div>
<div id="ref-piani2010pr" class="csl-entry" role="listitem">
Piani C, Haerter J, Coppola E. 2010. Statistical bias correction for daily precipitation in regional climate models over europe. <em>Theoretical and Applied Climatology</em>. 99(1-2):187–192.
</div>
<div id="ref-piani2010suhu" class="csl-entry" role="listitem">
Piani C, Weedon G, Best M, Gomes S, Viterbo P, Hagemann S, Haerter J. 2010. Statistical bias correction of global simulated daily precipitation and temperature for the application of hydrological models. <em>Journal of Hydrology</em>. 395(3-4):199–215.
</div>
<div id="ref-powers2017" class="csl-entry" role="listitem">
Powers JG, Klemp JB, Skamarock WC, Davis CA, Dudhia J, Gill DO, Coen JL, Gochis DJ, Ahmadov R, Peckham SE, <em>et al.</em> 2017. The weather research and forecasting model: Overview, system efforts, and future directions. <em>Bulletin of the American Meteorological Society</em>. 98(8):1717–1737.doi:<a href="https://doi.org/10.1175/BAMS-D-15-00308.1">10.1175/BAMS-D-15-00308.1</a>.
</div>
<div id="ref-richardson1981" class="csl-entry" role="listitem">
Richardson CW. 1981. Stochastic simulation of daily precipitation, temperature, and solar radiation. <em>Water resources research</em>. 17(1):182–190.
</div>
<div id="ref-sachindra2014" class="csl-entry" role="listitem">
Sachindra D, Huang F, Barton A, Perera B. 2014. Statistical downscaling of general circulation model outputs to precipitation—part 1: Calibration and validation. <em>International Journal of Climatology</em>. 34(11):3264–3281.
</div>
<div id="ref-skamarock2019" class="csl-entry" role="listitem">
Skamarock WC, Klemp JB, Dudhia J, Gill DO, Barker DM, Wang W, Powers JG. 2019. A description of the advanced research WRF version 4. National Center For Atmospheric Research Boulder Co Mesoscale; Microscale&nbsp;….
</div>
<div id="ref-smid2018" class="csl-entry" role="listitem">
Smid M, Costa AC. 2018. Climate projections and downscaling techniques: A discussion for impact studies in urban systems. <em>International Journal of Urban Sciences</em>. 22(3):277–307.doi:<a href="https://doi.org/10.1080/12265934.2017.1409132">10.1080/12265934.2017.1409132</a>.
</div>
<div id="ref-sonkaew" class="csl-entry" role="listitem">
Sonkaew T, Cumwan S, Kanta W, Macatangay R. Finding the optimum microphysics and convective parameterization schemes for the WRF model for LPRU, thailand.
</div>
<div id="ref-talbot2012" class="csl-entry" role="listitem">
Talbot C, Bou-Zeid E, Smith J. 2012. Nested mesoscale large-eddy simulations with WRF: Performance in real test cases. <em>Journal of Hydrometeorology</em>. 13(5):1421–1441.
</div>
<div id="ref-wilby1997" class="csl-entry" role="listitem">
Wilby RL, Wigley TM. 1997. Downscaling general circulation model output: A review of methods and limitations. <em>Progress in physical geography</em>. 21(4):530–548.
</div>
<div id="ref-xu2018performance" class="csl-entry" role="listitem">
Xu H, Wang M, Wang Y, Cai W. 2018. Performance of WRF large eddy simulations in modeling the convective boundary layer over the taklimakan desert, china. <em>Journal of Meteorological Research</em>. 32(6):1011–1025.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">{.unnumbered}</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./praktikum-2.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Model Pendugaan Radiasi Matahari</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>